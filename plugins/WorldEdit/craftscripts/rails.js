!function(){var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.string=t.boolean=t.number=t.object=t.example=t.optional=t.required=t.command=void 0,t.command="\xa76",t.required="\xa7a",t.optional="\xa7b";var e="".concat("\xa77").concat("\xa7o");t.example=e,t.object="\xa7f",t.number="\xa7c",t.boolean="\xa7d",t.string="\xa7e";var n={};Object.defineProperty(n,"__esModule",{value:!0}),n.rails=void 0;"".concat(t.command,"/cs draw ").concat(t.required,"<file> ").concat(t.optional,"[block] [options] \n").concat(t.example,"/cs draw rails1 iron_block\n").concat(t.example,'/cs draw file3.kml stone {"offset":3,"onGround":false}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"block": ').concat(t.string,'"gold_block"').concat(t.object,",\n  ").concat(t.object,'"height": ').concat(t.number,"1").concat(t.object,",\n  ").concat(t.object,'"offset": ').concat(t.number,"0").concat(t.object,",\n  ").concat(t.object,'"onGround": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreBuildings": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreVegetation": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n  ").concat(t.object,'"allowedBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"]\n  ").concat(t.object,"}\n"),"".concat(t.command,"/cs gis_fr ").concat(t.optional,"[options] \n").concat(t.example,"/cs gis_fr\n").concat(t.example,'/cs gis_fr {"smooth":false,"ignoreWater":true}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"smooth": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreWater": ').concat(t.boolean,"false").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n").concat(t.object,"}\n"),"".concat(t.command,"/cs gis_jp ").concat(t.optional,"[options] \n").concat(t.example,"/cs gis_jp\n").concat(t.example,'/cs gis_jp {"smooth":false,"ignoreWater":true}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"smooth": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreWater": ').concat(t.boolean,"false").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n").concat(t.object,"}\n"),"".concat(t.command,"/cs hedges ").concat(t.optional,"[options] \n").concat(t.example,"/cs hedges\n").concat(t.example,'/cs hedges {"block":"stone","height":5}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"block": ').concat(t.string,'"leaves:4"').concat(t.object,",\n  ").concat(t.object,'"height": ').concat(t.number,"2").concat(t.object,",\n  ").concat(t.object,'"offset": ').concat(t.number,"1").concat(t.object,",\n  ").concat(t.object,'"onGround": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreBuildings": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreVegetation": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n  ").concat(t.object,'"allowedBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"]\n").concat(t.object,"}\n"),"".concat(t.command,"/cs hedgesnear ").concat(t.required,"<radius> ").concat(t.optional,"[options] \n").concat(t.example,"/cs hedgesnear 7\n").concat(t.example,'/cs hedgesnear 50 {"block":"stone","height":5}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"block": ').concat(t.string,'"leaves:4"').concat(t.object,",\n  ").concat(t.object,'"height": ').concat(t.number,"2").concat(t.object,",\n  ").concat(t.object,'"offset": ').concat(t.number,"1").concat(t.object,",\n  ").concat(t.object,'"onGround": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreBuildings": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreVegetation": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n  ").concat(t.object,'"allowedBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"]\n").concat(t.object,"}\n"),"".concat(t.command,"/cs osm ").concat(t.required,"<query> ").concat(t.optional,"[options] \n  ").concat(t.example,'/cs osm way[highway~"^.*$"]\n  ').concat(t.example,'/cs osm way[railway~"^.*$"] {"block":"stone","offset":5}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"block": ').concat(t.string,'"diamond_block"').concat(t.object,",\n  ").concat(t.object,'"offset": ').concat(t.number,"0").concat(t.object,",\n  ").concat(t.object,'"height": ').concat(t.number,"1").concat(t.object,",\n  ").concat(t.object,'"onGround": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreBuildings": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreVegetation": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n  ").concat(t.object,'"allowedBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"]\n").concat(t.object,"}\n"),"".concat(t.command,"/cs osmnear ").concat(t.required,"<query> <radius> ").concat(t.optional,"[options] \n  ").concat(t.example,'/cs osmnear way[highway~"^.*$"] 7\n  ').concat(t.example,'/cs osmnear way[railway~"^.*$"] 50 {"block":"stone","offset":5}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"block": ').concat(t.string,'"diamond_block"').concat(t.object,",\n  ").concat(t.object,'"offset": ').concat(t.number,"0").concat(t.object,",\n  ").concat(t.object,'"height": ').concat(t.number,"1").concat(t.object,",\n  ").concat(t.object,'"regex": ').concat(t.string,'"^.*$"').concat(t.object,",\n  ").concat(t.object,'"onGround": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreBuildings": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreVegetation": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n  ").concat(t.object,'"allowedBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"]\n").concat(t.object,"}\n");var r="".concat(t.command,"/cs rails ").concat(t.optional,"[options] \n  ").concat(t.example,"/cs rails\n  ").concat(t.example,'/cs rails {"block":"stone","offset":5}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"block": ').concat(t.string,'"iron_block"').concat(t.object,",\n  ").concat(t.object,'"offset": ').concat(t.number,"0").concat(t.object,",\n  ").concat(t.object,'"height": ').concat(t.number,"1").concat(t.object,",\n  ").concat(t.object,'"regex": ').concat(t.string,'"^.*$"').concat(t.object,",\n  ").concat(t.object,'"onGround": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreBuildings": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreVegetation": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n  ").concat(t.object,'"allowedBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"]\n").concat(t.object,"}\n");n.rails=r;"".concat(t.command,"/cs railsnear ").concat(t.required,"<radius> ").concat(t.required,"[options] \n  ").concat(t.example,"/cs railsnear 7\n  ").concat(t.example,'/cs railsnear 50 {"block":"stone","offset":5}\nDefault options: ').concat(t.object,"{\n  ").concat(t.object,'"block": ').concat(t.string,'"iron_block"').concat(t.object,",\n  ").concat(t.object,'"offset": ').concat(t.number,"0").concat(t.object,",\n  ").concat(t.object,'"height": ').concat(t.number,"1").concat(t.object,",\n  ").concat(t.object,'"regex": ').concat(t.string,'"^.*$"').concat(t.object,",\n  ").concat(t.object,'"onGround": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreBuildings": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoreVegetation": ').concat(t.boolean,"true").concat(t.object,",\n  ").concat(t.object,'"ignoredBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"],\n  ").concat(t.object,'"allowedBlocks": [').concat(t.string,'"see documentation"').concat(t.object,"]\n").concat(t.object,"}\n"),"".concat(t.command,"/cs tpll ").concat(t.required,"<latitude> <longitude> ").concat(t.required,"[altitude]\n  ").concat(t.example,"/cs tpll 47.58523 6.89725\n  ").concat(t.example,"/cs tpll 47.58523, 6.89725 370\n  ").concat(t.example,"/cs tpll 47\xb035'6.32\"N 6\xb053'50.06\"E\n  ").concat(t.example,"/cs tpll 47\xb035'6.32\"N, 6\xb053'50.06\"E 370");var o={exports:{}};(function(t){(function(){var e="[object Arguments]",n="[object Array]",r="[object Boolean]",a="[object Date]",i="[object Function]",c="[object GeneratorFunction]",s="[object Map]",u="[object Number]",l="[object Object]",f="[object RegExp]",h="[object Set]",d="[object String]",p="[object Symbol]",y="[object WeakMap]",g="[object DataView]",b="[object Float32Array]",v="[object Float64Array]",m="[object Int8Array]",_="[object Int16Array]",O="[object Int32Array]",T="[object Uint8Array]",A="[object Uint16Array]",j="[object Uint32Array]",R=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,w=/^\w*$/,E=/^\./,k=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,I=/\w*$/,N=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,S={};S[b]=S[v]=S[m]=S[_]=S[O]=S[T]=S["[object Uint8ClampedArray]"]=S[A]=S[j]=!0,S[e]=S[n]=S["[object ArrayBuffer]"]=S[r]=S[g]=S[a]=S["[object Error]"]=S[i]=S[s]=S[u]=S[l]=S[f]=S[h]=S[d]=S[y]=!1;var P={};P[e]=P[n]=P["[object ArrayBuffer]"]=P[g]=P[r]=P[a]=P[b]=P[v]=P[m]=P[_]=P[O]=P[s]=P[u]=P[l]=P[f]=P[h]=P[d]=P[p]=P[T]=P["[object Uint8ClampedArray]"]=P[A]=P[j]=!0,P["[object Error]"]=P[i]=P[y]=!1;var B="object"==typeof t&&t&&t.Object===Object&&t,x="object"==typeof self&&self&&self.Object===Object&&self,L=B||x||Function("return this")(),V="object"==typeof o.exports&&o.exports&&!o.exports.nodeType&&o.exports,D=V&&o&&!o.nodeType&&o,G=D&&D.exports===V,U=G&&B.process,q=function(){try{return U&&U.binding("util")}catch(t){}}(),X=q&&q.isTypedArray;function F(t,e){return t.set(e[0],e[1]),t}function Y(t,e){return t.add(e),t}function $(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););return t}function H(t,e,n,r){var o=-1,a=t?t.length:0;for(r&&a&&(n=t[++o]);++o<a;)n=e(n,t[o],o,t);return n}function z(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}function W(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function Z(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function J(t,e){return function(n){return t(e(n))}}function K(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Q,tt=Array.prototype,et=Function.prototype,nt=Object.prototype,rt=L["__core-js_shared__"],ot=(Q=/[^.]+$/.exec(rt&&rt.keys&&rt.keys.IE_PROTO||""))?"Symbol(src)_1."+Q:"",at=et.toString,it=nt.hasOwnProperty,ct=at.call(Object),st=nt.toString,ut=RegExp("^"+at.call(it).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=G?L.Buffer:void 0,ft=L.Symbol,ht=L.Uint8Array,dt=J(Object.getPrototypeOf,Object),pt=Object.create,yt=nt.propertyIsEnumerable,gt=tt.splice,bt=Object.getOwnPropertySymbols,vt=lt?lt.isBuffer:void 0,mt=J(Object.keys,Object),_t=Math.max,Ot=ue(L,"DataView"),Tt=ue(L,"Map"),At=ue(L,"Promise"),jt=ue(L,"Set"),Rt=ue(L,"WeakMap"),wt=ue(Object,"create"),Et=!yt.call({valueOf:1},"valueOf"),kt=me(Ot),Mt=me(Tt),It=me(At),Nt=me(jt),Ct=me(Rt),St=ft?ft.prototype:void 0,Pt=St?St.valueOf:void 0,Bt=St?St.toString:void 0;function xt(){}function Lt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Vt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Dt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gt(t){var e=-1,n=t?t.length:0;for(this.__data__=new Dt;++e<n;)this.add(t[e])}function Ut(t){this.__data__=new Vt(t)}function qt(t,e){var n=je(t)||Ae(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,o=!!r;for(var a in t)!e&&!it.call(t,a)||o&&("length"==a||he(a,r))||n.push(a);return n}function Xt(t,e,n){(void 0===n||Te(t[e],n))&&("number"!=typeof e||void 0!==n||e in t)||(t[e]=n)}function Ft(t,e,n){var r=t[e];it.call(t,e)&&Te(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function Yt(t,e){for(var n=t.length;n--;)if(Te(t[n][0],e))return n;return-1}function $t(t,n,o,y,R,w,E){var k;if(y&&(k=w?y(t,R,w,E):y(t)),void 0!==k)return k;if(!Ie(t))return t;var M=je(t);if(M){if(k=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&it.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!n)return oe(t,k)}else{var N=fe(t),C=N==i||N==c;if(Ee(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,n);if(N==l||N==e||C&&!w){if(W(t))return w?t:{};if(k=function(t){return"function"!=typeof t.constructor||pe(t)?{}:Ie(e=dt(t))?pt(e):{};var e}(C?{}:t),!n)return function(t,e){return ae(t,le(t),e)}(t,function(t,e){return t&&ae(e,Ge(e),t)}(k,t))}else{if(!P[N])return w?t:{};k=function(t,e,n,o){var i,c,l,y=t.constructor;switch(e){case"[object ArrayBuffer]":return re(t);case r:case a:return new y(+t);case g:return function(t,e){var n=e?re(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,o);case b:case v:case m:case _:case O:case T:case"[object Uint8ClampedArray]":case A:case j:return function(t,e){var n=e?re(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,o);case s:return function(t,e,n){return H(e?n(Z(t),!0):Z(t),F,new t.constructor)}(t,o,n);case u:case d:return new y(t);case f:return(l=new(c=t).constructor(c.source,I.exec(c))).lastIndex=c.lastIndex,l;case h:return function(t,e,n){return H(e?n(K(t),!0):K(t),Y,new t.constructor)}(t,o,n);case p:return i=t,Pt?Object(Pt.call(i)):{}}}(t,N,$t,n)}}E||(E=new Ut);var S=E.get(t);if(S)return S;if(E.set(t,k),!M)var B=o?function(t){return function(t,e,n){var r=e(t);return je(t)?r:function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}(r,n(t))}(t,Ge,le)}(t):Ge(t);return $(B||t,(function(e,r){B&&(e=t[r=e]),Ft(k,r,$t(e,n,o,y,r,t,E))})),k}Lt.prototype.clear=function(){this.__data__=wt?wt(null):{}},Lt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Lt.prototype.get=function(t){var e=this.__data__;if(wt){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return it.call(e,t)?e[t]:void 0},Lt.prototype.has=function(t){var e=this.__data__;return wt?void 0!==e[t]:it.call(e,t)},Lt.prototype.set=function(t,e){return this.__data__[t]=wt&&void 0===e?"__lodash_hash_undefined__":e,this},Vt.prototype.clear=function(){this.__data__=[]},Vt.prototype.delete=function(t){var e=this.__data__,n=Yt(e,t);return!(n<0||(n==e.length-1?e.pop():gt.call(e,n,1),0))},Vt.prototype.get=function(t){var e=this.__data__,n=Yt(e,t);return n<0?void 0:e[n][1]},Vt.prototype.has=function(t){return Yt(this.__data__,t)>-1},Vt.prototype.set=function(t,e){var n=this.__data__,r=Yt(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Dt.prototype.clear=function(){this.__data__={hash:new Lt,map:new(Tt||Vt),string:new Lt}},Dt.prototype.delete=function(t){return se(this,t).delete(t)},Dt.prototype.get=function(t){return se(this,t).get(t)},Dt.prototype.has=function(t){return se(this,t).has(t)},Dt.prototype.set=function(t,e){return se(this,t).set(t,e),this},Gt.prototype.add=Gt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Gt.prototype.has=function(t){return this.__data__.has(t)},Ut.prototype.clear=function(){this.__data__=new Vt},Ut.prototype.delete=function(t){return this.__data__.delete(t)},Ut.prototype.get=function(t){return this.__data__.get(t)},Ut.prototype.has=function(t){return this.__data__.has(t)},Ut.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Vt){var r=n.__data__;if(!Tt||r.length<199)return r.push([t,e]),this;n=this.__data__=new Dt(r)}return n.set(t,e),this};var Ht,zt=(Ht=function(t,e){return t&&Wt(t,e,Ge)},function(t,e){if(null==t)return t;if(!Re(t))return Ht(t,e);for(var n=t.length,r=-1,o=Object(t);++r<n&&!1!==e(o[r],r,o););return t}),Wt=function(t,e,n){for(var r=-1,o=Object(t),a=n(t),i=a.length;i--;){var c=a[++r];if(!1===e(o[c],c,o))break}return t};function Zt(t,e){for(var n=0,r=(e=de(e,t)?[e]:ne(e)).length;null!=t&&n<r;)t=t[ve(e[n++])];return n&&n==r?t:void 0}function Jt(t,e){return null!=t&&e in Object(t)}function Kt(t,o,i,c,y){return t===o||(null==t||null==o||!Ie(t)&&!Ne(o)?t!=t&&o!=o:function(t,o,i,c,y,b){var v=je(t),m=je(o),_=n,O=n;v||(_=(_=fe(t))==e?l:_),m||(O=(O=fe(o))==e?l:O);var T=_==l&&!W(t),A=O==l&&!W(o),j=_==O;if(j&&!T)return b||(b=new Ut),v||Be(t)?ie(t,o,i,c,y,b):function(t,e,n,o,i,c,l){switch(n){case g:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new ht(t),new ht(e)));case r:case a:case u:return Te(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case f:case d:return t==e+"";case s:var y=Z;case h:var b=2&c;if(y||(y=K),t.size!=e.size&&!b)return!1;var v=l.get(t);if(v)return v==e;c|=1,l.set(t,e);var m=ie(y(t),y(e),o,i,c,l);return l.delete(t),m;case p:if(Pt)return Pt.call(t)==Pt.call(e)}return!1}(t,o,_,i,c,y,b);if(!(2&y)){var R=T&&it.call(t,"__wrapped__"),w=A&&it.call(o,"__wrapped__");if(R||w){var E=R?t.value():t,k=w?o.value():o;return b||(b=new Ut),i(E,k,c,y,b)}}return!!j&&(b||(b=new Ut),function(t,e,n,r,o,a){var i=2&o,c=Ge(t),s=c.length;if(s!=Ge(e).length&&!i)return!1;for(var u=s;u--;){var l=c[u];if(!(i?l in e:it.call(e,l)))return!1}var f=a.get(t);if(f&&a.get(e))return f==e;var h=!0;a.set(t,e),a.set(e,t);for(var d=i;++u<s;){var p=t[l=c[u]],y=e[l];if(r)var g=i?r(y,p,l,e,t,a):r(p,y,l,t,e,a);if(!(void 0===g?p===y||n(p,y,r,o,a):g)){h=!1;break}d||(d="constructor"==l)}if(h&&!d){var b=t.constructor,v=e.constructor;b!=v&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof v&&v instanceof v)&&(h=!1)}return a.delete(t),a.delete(e),h}(t,o,i,c,y,b))}(t,o,Kt,i,c,y))}function Qt(t){return"function"==typeof t?t:null==t?Xe:"object"==typeof t?je(t)?(r=t[0],o=t[1],de(r)&&ye(o)?ge(ve(r),o):function(t){var e=Ve(t,r);return void 0===e&&e===o?De(t,r):Kt(o,e,void 0,3)}):1==(n=function(t){for(var e=Ge(t),n=e.length;n--;){var r=e[n],o=t[r];e[n]=[r,o,ye(o)]}return e}(e=t)).length&&n[0][2]?ge(n[0][0],n[0][1]):function(t){return t===e||function(t,e,n,r){var o=n.length,a=o;if(null==t)return!a;for(t=Object(t);o--;){var i=n[o];if(i[2]?i[1]!==t[i[0]]:!(i[0]in t))return!1}for(;++o<a;){var c=(i=n[o])[0],s=t[c],u=i[1];if(i[2]){if(void 0===s&&!(c in t))return!1}else{var l,f=new Ut;if(!(void 0===l?Kt(u,s,void 0,3,f):l))return!1}}return!0}(t,0,n)}:Ye(t);var e,n,r,o}function te(t){if(!Ie(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=pe(t),n=[];for(var r in t)("constructor"!=r||!e&&it.call(t,r))&&n.push(r);return n}function ee(t,e,n,r,o){if(t!==e){if(!je(e)&&!Be(e))var a=te(e);$(a||e,(function(i,c){if(a&&(i=e[c=i]),Ie(i))o||(o=new Ut),function(t,e,n,r,o,a,i){var c=t[n],s=e[n],u=i.get(s);if(u)Xt(t,n,u);else{var l=a?a(c,s,n+"",t,e,i):void 0,f=void 0===l;f&&(l=s,je(s)||Be(s)?je(c)?l=c:we(c)?l=oe(c):(f=!1,l=$t(s,!0)):Ce(s)||Ae(s)?Ae(c)?l=xe(c):!Ie(c)||r&&ke(c)?(f=!1,l=$t(s,!0)):l=c:f=!1),f&&(i.set(s,l),o(l,s,r,a,i),i.delete(s)),Xt(t,n,l)}}(t,e,c,n,ee,r,o);else{var s=r?r(t[c],i,c+"",t,e,o):void 0;void 0===s&&(s=i),Xt(t,c,s)}}))}}function ne(t){return je(t)?t:be(t)}function re(t){var e=new t.constructor(t.byteLength);return new ht(e).set(new ht(t)),e}function oe(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function ae(t,e,n,r){n||(n={});for(var o=-1,a=e.length;++o<a;){var i=e[o],c=r?r(n[i],t[i],i,n,t):void 0;Ft(n,i,void 0===c?t[i]:c)}return n}function ie(t,e,n,r,o,a){var i=2&o,c=t.length,s=e.length;if(c!=s&&!(i&&s>c))return!1;var u=a.get(t);if(u&&a.get(e))return u==e;var l=-1,f=!0,h=1&o?new Gt:void 0;for(a.set(t,e),a.set(e,t);++l<c;){var d=t[l],p=e[l];if(r)var y=i?r(p,d,l,e,t,a):r(d,p,l,t,e,a);if(void 0!==y){if(y)continue;f=!1;break}if(h){if(!z(e,(function(t,e){if(!h.has(e)&&(d===t||n(d,t,r,o,a)))return h.add(e)}))){f=!1;break}}else if(d!==p&&!n(d,p,r,o,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function ce(){var t=xt.iteratee||Fe;return t=t===Fe?Qt:t,arguments.length?t(arguments[0],arguments[1]):t}function se(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map}function ue(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Ie(t)||(e=t,ot&&ot in e))&&(ke(t)||W(t)?ut:N).test(me(t));var e}(n)?n:void 0}var le=bt?J(bt,Object):$e,fe=function(t){return st.call(t)};function he(t,e){return!!(e=null==e?9007199254740991:e)&&("number"==typeof t||C.test(t))&&t>-1&&t%1==0&&t<e}function de(t,e){if(je(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Se(t))||w.test(t)||!R.test(t)||null!=e&&t in Object(e)}function pe(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||nt)}function ye(t){return t==t&&!Ie(t)}function ge(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}(Ot&&fe(new Ot(new ArrayBuffer(1)))!=g||Tt&&fe(new Tt)!=s||At&&"[object Promise]"!=fe(At.resolve())||jt&&fe(new jt)!=h||Rt&&fe(new Rt)!=y)&&(fe=function(t){var e=st.call(t),n=e==l?t.constructor:void 0,r=n?me(n):void 0;if(r)switch(r){case kt:return g;case Mt:return s;case It:return"[object Promise]";case Nt:return h;case Ct:return y}return e});var be=Oe((function(t){t=Le(t);var e=[];return E.test(t)&&e.push(""),t.replace(k,(function(t,n,r,o){e.push(r?o.replace(M,"$1"):n||t)})),e}));function ve(t){if("string"==typeof t||Se(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function me(t){if(null!=t){try{return at.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function _e(t,e){return(je(t)?$:zt)(t,ce(e,3))}function Oe(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,o=e?e.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var i=t.apply(this,r);return n.cache=a.set(o,i),i};return n.cache=new(Oe.Cache||Dt),n}function Te(t,e){return t===e||t!=t&&e!=e}function Ae(t){return we(t)&&it.call(t,"callee")&&(!yt.call(t,"callee")||st.call(t)==e)}Oe.Cache=Dt;var je=Array.isArray;function Re(t){return null!=t&&Me(t.length)&&!ke(t)}function we(t){return Ne(t)&&Re(t)}var Ee=vt||He;function ke(t){var e=Ie(t)?st.call(t):"";return e==i||e==c}function Me(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}function Ie(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Ne(t){return!!t&&"object"==typeof t}function Ce(t){if(!Ne(t)||st.call(t)!=l||W(t))return!1;var e=dt(t);if(null===e)return!0;var n=it.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&at.call(n)==ct}function Se(t){return"symbol"==typeof t||Ne(t)&&st.call(t)==p}var Pe,Be=X?(Pe=X,function(t){return Pe(t)}):function(t){return Ne(t)&&Me(t.length)&&!!S[st.call(t)]};function xe(t){return ae(t,Ue(t))}function Le(t){return null==t?"":function(t){if("string"==typeof t)return t;if(Se(t))return Bt?Bt.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}(t)}function Ve(t,e,n){var r=null==t?void 0:Zt(t,e);return void 0===r?n:r}function De(t,e){return null!=t&&function(t,e,n){for(var r,o=-1,a=(e=de(e,t)?[e]:ne(e)).length;++o<a;){var i=ve(e[o]);if(!(r=null!=t&&n(t,i)))break;t=t[i]}return r||!!(a=t?t.length:0)&&Me(a)&&he(i,a)&&(je(t)||Ae(t))}(t,e,Jt)}function Ge(t){return Re(t)?qt(t):function(t){if(!pe(t))return mt(t);var e=[];for(var n in Object(t))it.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}function Ue(t){return Re(t)?qt(t,!0):te(t)}var qe=function(t){return e=function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,i&&function(t,e,n){if(!Ie(n))return!1;var r=typeof e;return!!("number"==r?Re(n)&&he(e,n.length):"string"==r&&e in n)&&Te(n[e],t)}(n[0],n[1],i)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var c=n[r];c&&t(e,c,r)}return e},n=_t(void 0===n?e.length-1:n,0),function(){for(var t=arguments,r=-1,o=_t(t.length-n,0),a=Array(o);++r<o;)a[r]=t[n+r];r=-1;for(var i=Array(n+1);++r<n;)i[r]=t[r];return i[n]=a,function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(e,this,i)};var e,n}((function(t,e,n){ee(t,e,n)}));function Xe(t){return t}function Fe(t){return Qt("function"==typeof t?t:$t(t,!0))}function Ye(t){return de(t)?(e=ve(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Zt(e,t)}}(t);var e}function $e(){return[]}function He(){return!1}xt.compact=function(t){for(var e=-1,n=t?t.length:0,r=0,o=[];++e<n;){var a=t[e];a&&(o[r++]=a)}return o},xt.iteratee=Fe,xt.keys=Ge,xt.keysIn=Ue,xt.memoize=Oe,xt.merge=qe,xt.property=Ye,xt.toPlainObject=xe,xt.clone=function(t){return $t(t,!1,!0)},xt.eq=Te,xt.forEach=_e,xt.get=Ve,xt.hasIn=De,xt.identity=Xe,xt.isArguments=Ae,xt.isArray=je,xt.isArrayLike=Re,xt.isArrayLikeObject=we,xt.isBuffer=Ee,xt.isEmpty=function(t){if(Re(t)&&(je(t)||"string"==typeof t||"function"==typeof t.splice||Ee(t)||Ae(t)))return!t.length;var e=fe(t);if(e==s||e==h)return!t.size;if(Et||pe(t))return!mt(t).length;for(var n in t)if(it.call(t,n))return!1;return!0},xt.isFunction=ke,xt.isLength=Me,xt.isObject=Ie,xt.isObjectLike=Ne,xt.isPlainObject=Ce,xt.isSymbol=Se,xt.isTypedArray=Be,xt.stubArray=$e,xt.stubFalse=He,xt.toString=Le,xt.each=_e,xt.VERSION="4.15.0",D&&((D.exports=xt)._=xt,V._=xt)}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),o=o.exports;var a={RADIUS:6378137},i={};function c(t){var e,n,r,o,i,c,u=0,l=t.length;if(l>2){for(c=0;c<l;c++)c===l-2?(r=l-2,o=l-1,i=0):c===l-1?(r=l-1,o=0,i=1):(r=c,o=c+1,i=c+2),e=t[r],n=t[o],u+=(s(t[i][0])-s(e[0]))*Math.sin(s(n[1]));u=u*a.RADIUS*a.RADIUS/2}return u}function s(t){return t*Math.PI/180}function u(t,e){return function(n){return t(n,e)}}function l(t,e){e=!!e,t[0]=f(t[0],e);for(var n=1;n<t.length;n++)t[n]=f(t[n],!e);return t}function f(t,e){return function(t){return i.ring(t)>=0}(t)===e?t:t.reverse()}i.ring=c;var h,d,p=function t(e,n){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(u(t,n)),e;case"GeometryCollection":return e.geometries=e.geometries.map(u(t,n)),e;case"Feature":return e.geometry=t(e.geometry,n),e;case"Polygon":case"MultiPolygon":return function(t,e){return"Polygon"===t.type?t.coordinates=l(t.coordinates,e):"MultiPolygon"===t.type&&(t.coordinates=t.coordinates.map(u(l,e))),t}(e,n);default:return e}},y={};function g(t,e){return(t.version||e.version)&&t.version!==e.version?(+t.version||0)>(+e.version||0)?t:e:o.merge(t,e)}function b(t){for(var e,n,r,o,a,i,c=function(t){return t[0]},s=function(t){return t[t.length-1]},u=function(t,e){return void 0!==t&&void 0!==e&&t.id===e.id},l=[];t.length;)for(e=t.pop().nodes.slice(),l.push(e);t.length&&!u(c(e),s(e));){for(n=c(e),r=s(e),o=0;o<t.length;o++){if(u(r,c(i=t[o].nodes))){a=e.push,i=i.slice(1);break}if(u(r,s(i))){a=e.push,i=i.slice(0,-1).reverse();break}if(u(n,s(i))){a=e.unshift,i=i.slice(0,-1);break}if(u(n,c(i))){a=e.unshift,i=i.slice(1).reverse();break}i=a=null}if(!i)break;t.splice(o,1),a.apply(e,i)}return l}[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}].forEach((function(t){if("all"===t.polygon)y[t.key]=!0;else{var e="whitelist"===t.polygon?"included_values":"excluded_values",n={};t.values.forEach((function(t){n[t]=!0})),y[t.key]={},y[t.key][e]=n}})),(d=function(t,e,n){return e=o.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:y,deduplicator:g},e),"undefined"!=typeof XMLDocument&&t instanceof XMLDocument||"undefined"==typeof XMLDocument&&t.childNodes?function(t){var e,n,a=new Array,i=new Array,c=new Array;function s(t,e,n){t.hasAttribute(n)&&(e[n]=t.getAttribute(n))}function u(t,e){var n=o.clone(t);s(e,n,"lat"),s(e,n,"lon"),n.__is_center_placeholder=!0,a.push(n)}function l(t,e){var n=o.clone(t);function r(t,e,r){var o={type:"node",id:"_"+n.type+"/"+n.id+"bounds"+r,lat:t,lon:e};n.nodes.push(o.id),a.push(o)}n.nodes=[],r(e.getAttribute("minlat"),e.getAttribute("minlon"),1),r(e.getAttribute("maxlat"),e.getAttribute("minlon"),2),r(e.getAttribute("maxlat"),e.getAttribute("maxlon"),3),r(e.getAttribute("minlat"),e.getAttribute("maxlon"),4),n.nodes.push(n.nodes[0]),n.__is_bounds_placeholder=!0,i.push(n)}return o.each(t.getElementsByTagName("node"),(function(t,e){var n={};o.each(t.getElementsByTagName("tag"),(function(t){n[t.getAttribute("k")]=t.getAttribute("v")}));var r={type:"node"};s(t,r,"id"),s(t,r,"lat"),s(t,r,"lon"),s(t,r,"version"),s(t,r,"timestamp"),s(t,r,"changeset"),s(t,r,"uid"),s(t,r,"user"),o.isEmpty(n)||(r.tags=n),a.push(r)})),o.each(t.getElementsByTagName("way"),(function(t,r){var c={},f=[];o.each(t.getElementsByTagName("tag"),(function(t){c[t.getAttribute("k")]=t.getAttribute("v")}));var h=!1;o.each(t.getElementsByTagName("nd"),(function(t,e){var n;(n=t.getAttribute("ref"))&&(f[e]=n),!h&&t.getAttribute("lat")&&(h=!0)}));var d={type:"way"};s(t,d,"id"),s(t,d,"version"),s(t,d,"timestamp"),s(t,d,"changeset"),s(t,d,"uid"),s(t,d,"user"),f.length>0&&(d.nodes=f),o.isEmpty(c)||(d.tags=c),(e=t.getElementsByTagName("center")[0])&&u(d,e),h?function(t,e){o.isArray(t.nodes)||(t.nodes=[],o.each(e,(function(e,n){t.nodes.push("_anonymous@"+e.getAttribute("lat")+"/"+e.getAttribute("lon"))}))),o.each(e,(function(e,n){var r,o,i;e.getAttribute("lat")&&(r=e.getAttribute("lat"),o=e.getAttribute("lon"),i={type:"node",id:t.nodes[n],lat:r,lon:o},a.push(i))}))}(d,t.getElementsByTagName("nd")):(n=t.getElementsByTagName("bounds")[0])&&l(d,n),i.push(d)})),o.each(t.getElementsByTagName("relation"),(function(t,r){var f={},h=[];o.each(t.getElementsByTagName("tag"),(function(t){f[t.getAttribute("k")]=t.getAttribute("v")}));var d=!1;o.each(t.getElementsByTagName("member"),(function(t,e){h[e]={},s(t,h[e],"ref"),s(t,h[e],"role"),s(t,h[e],"type"),(!d&&"node"==h[e].type&&t.getAttribute("lat")||"way"==h[e].type&&t.getElementsByTagName("nd").length>0)&&(d=!0)}));var p={type:"relation"};s(t,p,"id"),s(t,p,"version"),s(t,p,"timestamp"),s(t,p,"changeset"),s(t,p,"uid"),s(t,p,"user"),h.length>0&&(p.members=h),o.isEmpty(f)||(p.tags=f),(e=t.getElementsByTagName("center")[0])&&u(p,e),d?function(t,e){o.each(e,(function(e,n){var r,c,s;"node"==t.members[n].type?e.getAttribute("lat")&&(r=e.getAttribute("lat"),c=e.getAttribute("lon"),s={type:"node",id:t.members[n].ref,lat:r,lon:c},a.push(s)):"way"==t.members[n].type&&e.getElementsByTagName("nd").length>0&&(t.members[n].ref="_fullGeom"+t.members[n].ref,function(t,e){if(!i.some((function(t){return"way"==t.type&&t.id==e}))){var n={type:"way",id:e,nodes:[]};o.each(t,(function(t){var e,r,o;t.getAttribute("lat")?(o={type:"node",id:"_anonymous@"+(e=t.getAttribute("lat"))+"/"+(r=t.getAttribute("lon")),lat:e,lon:r},n.nodes.push(o.id),a.push(o)):n.nodes.push(void 0)})),i.push(n)}}(e.getElementsByTagName("nd"),t.members[n].ref))}))}(p,t.getElementsByTagName("member")):(n=t.getElementsByTagName("bounds")[0])&&l(p,n),c.push(p)})),r(a,i,c)}(t):function(t){var e=new Array,n=new Array,a=new Array;function i(t){var n=o.clone(t);n.lat=t.center.lat,n.lon=t.center.lon,n.__is_center_placeholder=!0,e.push(n)}function c(t){var r=o.clone(t);function a(t,n,o){var a={type:"node",id:"_"+r.type+"/"+r.id+"bounds"+o,lat:t,lon:n};r.nodes.push(a.id),e.push(a)}r.nodes=[],a(r.bounds.minlat,r.bounds.minlon,1),a(r.bounds.maxlat,r.bounds.minlon,2),a(r.bounds.maxlat,r.bounds.maxlon,3),a(r.bounds.minlat,r.bounds.maxlon,4),r.nodes.push(r.nodes[0]),r.__is_bounds_placeholder=!0,n.push(r)}function s(t){o.isArray(t.nodes)||(t.nodes=t.geometry.map((function(t){return null!==t?"_anonymous@"+t.lat+"/"+t.lon:"_anonymous@unknown_location"}))),t.geometry.forEach((function(n,r){var o,a,i;n&&(o=n.lat,a=n.lon,i={type:"node",id:t.nodes[r],lat:o,lon:a},e.push(i))}))}function u(t){t.members.forEach((function(t,r){var o,a,i;"node"==t.type?t.lat&&(o=t.lat,a=t.lon,i={type:"node",id:t.ref,lat:o,lon:a},e.push(i)):"way"==t.type&&t.geometry&&(t.ref="_fullGeom"+t.ref,function(t,r){if(!n.some((function(t){return"way"==t.type&&t.id==r}))){var o={type:"way",id:r,nodes:[]};t.forEach((function(t){var n,r,a;t?(a={type:"node",id:"_anonymous@"+(n=t.lat)+"/"+(r=t.lon),lat:n,lon:r},o.nodes.push(a.id),e.push(a)):o.nodes.push(void 0)})),n.push(o)}}(t.geometry,t.ref))}))}for(var l=0;l<t.elements.length;l++)switch(t.elements[l].type){case"node":var f=t.elements[l];e.push(f);break;case"way":var h=o.clone(t.elements[l]);h.nodes=o.clone(h.nodes),n.push(h),h.center&&i(h),h.geometry?s(h):h.bounds&&c(h);break;case"relation":var d=o.clone(t.elements[l]);d.members=o.clone(d.members),a.push(d);var p=d.members&&d.members.some((function(t){return"node"==t.type&&t.lat||"way"==t.type&&t.geometry&&t.geometry.length>0}));d.center&&i(d),p?u(d):d.bounds&&c(d)}return r(e,n,a)}(t);function r(t,r,i){function c(t,n){if("object"!=typeof n&&(n={}),"function"==typeof e.uninterestingTags)return!e.uninterestingTags(t,n);for(var r in t)if(!0!==e.uninterestingTags[r]&&!0!==n[r]&&n[r]!==t[r])return!0;return!1}function s(t){var e={timestamp:t.timestamp,version:t.version,changeset:t.changeset,user:t.user,uid:t.uid};for(var n in e)void 0===e[n]&&delete e[n];return e}for(var u=new Object,l=new Object,f=0;f<t.length;f++)void 0!==u[(_=t[f]).id]&&(_=e.deduplicator(_,u[_.id])),u[_.id]=_,void 0!==_.tags&&c(_.tags)&&(l[_.id]=!0);for(f=0;f<i.length;f++)if(o.isArray(i[f].members))for(var h=0;h<i[f].members.length;h++)"node"==i[f].members[h].type&&(l[i[f].members[h].ref]=!0);var d=new Object,y=new Object;for(f=0;f<r.length;f++){var g=r[f];if(d[g.id]&&(g=e.deduplicator(g,d[g.id])),d[g.id]=g,o.isArray(g.nodes))for(h=0;h<g.nodes.length;h++)"object"!=typeof g.nodes[h]&&(y[g.nodes[h]]=!0,g.nodes[h]=u[g.nodes[h]])}var v=new Array;for(var m in u){var _=u[m];y[m]&&!l[m]||v.push(_)}var O=new Array;for(f=0;f<i.length;f++)O[(j=i[f]).id]&&(j=e.deduplicator(j,O[j.id])),O[j.id]=j;var T,A={node:{},way:{},relation:{}};for(var m in O){var j=O[m];if(o.isArray(j.members))for(h=0;h<j.members.length;h++){var R=j.members[h].type,w=j.members[h].ref;"number"!=typeof w&&(w=w.replace("_fullGeom","")),A[R]?(void 0===A[R][w]&&(A[R][w]=[]),A[R][w].push({role:j.members[h].role,rel:j.id,reltags:j.tags})):e.verbose&&console.warn("Relation",j.type+"/"+j.id,"member",R+"/"+w,"ignored because it has an invalid type")}else e.verbose&&console.warn("Relation",j.type+"/"+j.id,"ignored because it has no members")}var E=[];for(f=0;f<v.length;f++)if(void 0!==v[f].lon&&void 0!==v[f].lat){var k={type:"Feature",id:v[f].type+"/"+v[f].id,properties:{type:v[f].type,id:v[f].id,tags:v[f].tags||{},relations:A.node[v[f].id]||[],meta:s(v[f])},geometry:{type:"Point",coordinates:[+v[f].lon,+v[f].lat]}};v[f].__is_center_placeholder&&(k.properties.geometry="center"),n?n(k):E.push(k)}else e.verbose&&console.warn("POI",v[f].type+"/"+v[f].id,"ignored because it lacks coordinates");var M=[],I=[];for(f=0;f<i.length;f++)if(O[i[f].id]===i[f]){if(void 0!==i[f].tags&&("route"==i[f].tags.type||"waterway"==i[f].tags.type)){if(!o.isArray(i[f].members)){e.verbose&&console.warn("Route",i[f].type+"/"+i[f].id,"ignored because it has no members");continue}if(i[f].members.forEach((function(t){d[t.ref]&&!c(d[t.ref].tags)&&(d[t.ref].is_skippablerelationmember=!0)})),!1===(k=N(i[f]))){e.verbose&&console.warn("Route relation",i[f].type+"/"+i[f].id,"ignored because it has invalid geometry");continue}function N(t){var n,r,a,i=!1;if(n=(n=t.members.filter((function(t){return"way"===t.type}))).map((function(n){var r=d[n.ref];return void 0===r||void 0===r.nodes?(e.verbose&&console.warn("Route "+t.type+"/"+t.id,"tainted by a missing or incomplete  way",n.type+"/"+n.ref),void(i=!0)):{id:n.ref,role:n.role,way:r,nodes:r.nodes.filter((function(r){return void 0!==r||(i=!0,e.verbose&&console.warn("Route",t.type+"/"+t.id,"tainted by a way",n.type+"/"+n.ref,"with a missing node"),!1)}))}})),r=b(n=o.compact(n)),0==(a=o.compact(r.map((function(t){return o.compact(t.map((function(t){return[+t.lon,+t.lat]})))})))).length)return e.verbose&&console.warn("Route",t.type+"/"+t.id,"contains no coordinates"),!1;var c={type:"Feature",id:t.type+"/"+t.id,properties:{type:t.type,id:t.id,tags:t.tags||{},relations:A[t.type][t.id]||[],meta:s(t)},geometry:{type:1===a.length?"LineString":"MultiLineString",coordinates:1===a.length?a[0]:a}};return i&&(e.verbose&&console.warn("Route",t.type+"/"+t.id,"is tainted"),c.properties.tainted=!0),c}n?n(p(k)):I.push(k)}if(void 0!==i[f].tags&&("multipolygon"==i[f].tags.type||"boundary"==i[f].tags.type)){if(!o.isArray(i[f].members)){e.verbose&&console.warn("Multipolygon",i[f].type+"/"+i[f].id,"ignored because it has no members");continue}var C=0;for(h=0;h<i[f].members.length;h++)"outer"==i[f].members[h].role?C++:e.verbose&&"inner"!=i[f].members[h].role&&console.warn("Multipolygon",i[f].type+"/"+i[f].id,"member",i[f].members[h].type+"/"+i[f].members[h].ref,'ignored because it has an invalid role: "'+i[f].members[h].role+'"');if(i[f].members.forEach((function(t){d[t.ref]&&("outer"!==t.role||c(d[t.ref].tags,i[f].tags)||(d[t.ref].is_skippablerelationmember=!0),"inner"!==t.role||c(d[t.ref].tags)||(d[t.ref].is_skippablerelationmember=!0))})),0==C){e.verbose&&console.warn("Multipolygon relation",i[f].type+"/"+i[f].id,"ignored because it has no outer ways");continue}var S=!1;if(1!=C||c(i[f].tags,{type:!0})||(S=!0),k=null,S){var P=i[f].members.filter((function(t){return"outer"===t.role}))[0];if(void 0===(P=d[P.ref])){e.verbose&&console.warn("Multipolygon relation",i[f].type+"/"+i[f].id,"ignored because outer way",P.type+"/"+P.ref,"is missing");continue}P.is_skippablerelationmember=!0,k=B(P,i[f])}else k=B(i[f],i[f]);if(!1===k){e.verbose&&console.warn("Multipolygon relation",i[f].type+"/"+i[f].id,"ignored because it has invalid geometry");continue}function B(t,n){var r,a,i,c,u=!1,l=S?"way":"relation",f="number"==typeof t.id?t.id:+t.id.replace("_fullGeom","");function h(t){var e,n=function(t,e){for(var n=0;n<e.length;n++)if(o(e[n],t))return!0;return!1},r=function(t){return t.map((function(t){return[+t.lat,+t.lon]}))},o=function(t,e){for(var n=t[0],r=t[1],o=!1,a=0,i=e.length-1;a<e.length;i=a++){var c=e[a][0],s=e[a][1],u=e[i][0],l=e[i][1];s>r!=l>r&&n<(u-c)*(r-s)/(l-s)+c&&(o=!o)}return o};for(t=r(t),e=0;e<a.length;e++)if(n(r(a[e]),t))return e}r=(r=n.members.filter((function(t){return"way"===t.type}))).map((function(t){var n=d[t.ref];return void 0===n||void 0===n.nodes?(e.verbose&&console.warn("Multipolygon",l+"/"+f,"tainted by a missing or incomplete way",t.type+"/"+t.ref),void(u=!0)):{id:t.ref,role:t.role||"outer",way:n,nodes:n.nodes.filter((function(n){return void 0!==n||(u=!0,e.verbose&&console.warn("Multipolygon",l+"/"+f,"tainted by a way",t.type+"/"+t.ref,"with a missing node"),!1)}))}})),r=o.compact(r),a=b(r.filter((function(t){return"outer"===t.role}))),i=b(r.filter((function(t){return"inner"===t.role}))),c=a.map((function(t){return[t]}));for(var p=0;p<i.length;p++){var y=h(i[p]);void 0!==y?c[y].push(i[p]):e.verbose&&console.warn("Multipolygon",l+"/"+f,"contains an inner ring with no containing outer")}var g=[];if(0==(g=o.compact(c.map((function(t){var n=o.compact(t.map((function(t){if(!(t.length<4))return o.compact(t.map((function(t){return[+t.lon,+t.lat]})));e.verbose&&console.warn("Multipolygon",l+"/"+f,"contains a ring with less than four nodes")})));if(0!=n.length)return n;e.verbose&&console.warn("Multipolygon",l+"/"+f,"contains an empty ring cluster")})))).length)return e.verbose&&console.warn("Multipolygon",l+"/"+f,"contains no coordinates"),!1;var v="MultiPolygon";1===g.length&&(v="Polygon",g=g[0]);var m={type:"Feature",id:t.type+"/"+f,properties:{type:t.type,id:f,tags:t.tags||{},relations:A[t.type][t.id]||[],meta:s(t)},geometry:{type:v,coordinates:g}};return u&&(e.verbose&&console.warn("Multipolygon",l+"/"+f,"is tainted"),m.properties.tainted=!0),m}n?n(p(k)):I.push(k)}}for(f=0;f<r.length;f++)if(d[r[f].id]===r[f])if(o.isArray(r[f].nodes)){if(!r[f].is_skippablerelationmember){"number"!=typeof r[f].id&&(r[f].id=+r[f].id.replace("_fullGeom","")),r[f].tainted=!1,r[f].hidden=!1;var x=new Array;for(h=0;h<r[f].nodes.length;h++)"object"==typeof r[f].nodes[h]?x.push([+r[f].nodes[h].lon,+r[f].nodes[h].lat]):(e.verbose&&console.warn("Way",r[f].type+"/"+r[f].id,"is tainted by an invalid node"),r[f].tainted=!0);if(x.length<=1)e.verbose&&console.warn("Way",r[f].type+"/"+r[f].id,"ignored because it contains too few nodes");else{var L="LineString";void 0!==r[f].nodes[0]&&void 0!==r[f].nodes[r[f].nodes.length-1]&&r[f].nodes[0].id===r[f].nodes[r[f].nodes.length-1].id&&(void 0!==r[f].tags&&a(r[f].tags)||r[f].__is_bounds_placeholder)&&(L="Polygon",x=[x]),k={type:"Feature",id:r[f].type+"/"+r[f].id,properties:{type:r[f].type,id:r[f].id,tags:r[f].tags||{},relations:A.way[r[f].id]||[],meta:s(r[f])},geometry:{type:L,coordinates:x}},r[f].tainted&&(e.verbose&&console.warn("Way",r[f].type+"/"+r[f].id,"is tainted"),k.properties.tainted=!0),r[f].__is_bounds_placeholder&&(k.properties.geometry="bounds"),n?n(p(k)):"LineString"==L?M.push(k):I.push(k)}}}else e.verbose&&console.warn("Way",r[f].type+"/"+r[f].id,"ignored because it has no nodes");return!!n||((T={type:"FeatureCollection",features:[]}).features=T.features.concat(I),T.features=T.features.concat(M),T.features=T.features.concat(E),e.flatProperties&&T.features.forEach((function(t){t.properties=o.merge(t.properties.meta,t.properties.tags,{id:t.properties.type+"/"+t.properties.id})})),p(T))}function a(t){var n=e.polygonFeatures;if("function"==typeof n)return n(t);if("no"===t.area)return!1;for(var r in t){var o=t[r],a=n[r];if(void 0!==a&&"no"!==o){if(!0===a)return!0;if(a.included_values&&!0===a.included_values[o])return!0;if(a.excluded_values&&!0!==a.excluded_values[o])return!0}}return!1}}).toGeojson=d,h=d;var v={};function m(t){if(t.exists()){var e=new BufferedReader(new FileReader(t)),n="",r="";do{n+=r,n+="\n",r=e.readLine()}while(r);return e.close(),n}}Object.defineProperty(v,"__esModule",{value:!0}),v.readFile=m;var _={};Object.defineProperty(_,"__esModule",{value:!0}),_.default=function(t,e,n){n=n||{};var r,o=context.getSafeOpenFile("../","terra121","cfg",[]),a=(0,v.readFile)(o),i=(a?a.match(new RegExp("overpass_interpreter=(.*)\\n"))[1]:"https://overpass.kumi.systems/api/interpreter")+"/api/interpreter?data=[out:json];"+t;try{player.print("\xa77\xa7oDatabase query...");var c=new URL(i).openConnection();c.addRequestProperty("User-Agent","BTE-tools");var s=c.getInputStream(),u=new StringWriter;IOUtils.copy(s,u,StandardCharsets.UTF_8);var l=u.toString();r=(0,T.default)(JSON.parse(l),{flatProperties:n.flatProperties||!1})}catch(f){return player.printError("Osm region download failed, no osm features will spawn"),void e(f)}e(void 0,r)};var O,T=(O=h)&&O.__esModule?O:{default:O};importPackage(Packages.java.io),importPackage(Packages.java.net),importPackage(Packages.java.nio.charset),importPackage(Packages.org.apache.commons.io);var A={};function j(t,e,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=k(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function R(t){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");var n,r;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(n=t,r=e,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(n,r))}function E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=k(t);if(e){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(t,e){return!e||"object"!==R(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,n)}}function k(t){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function N(t,e,n){return e&&I(t.prototype,e),n&&I(t,n),t}Object.defineProperty(A,"__esModule",{value:!0}),A.default=function(){var t=new V,e=(new C).orientProjection(t);return new B(e,7318261.522857145,7318261.522857145)},importPackage(Packages.java.io),importPackage(Packages.java.awt);var C=function(){function t(){M(this,t),this.Orientation={none:1,upright:2,swapped:3},this.EARTH_CIRCUMFERENCE=40075017,this.EARTH_POLAR_CIRCUMFERENCE=40008e3}return N(t,[{key:"orientProjection",value:function(t){return t.upright()?t:new P(t)}},{key:"toGeo",value:function(t,e){return[t,e]}},{key:"fromGeo",value:function(t,e){return[t,e]}},{key:"upright",value:function(){return this.fromGeo(0,90)[1]<=this.fromGeo(0,-90)[1]}},{key:"vector",value:function(t,e,n,r){var o=this.toGeo(t,e),a=this.fromGeo(o[0]+360*r/(Math.cos(o[1]*Math.PI/180)*this.EARTH_CIRCUMFERENCE),o[1]+360*n/this.EARTH_POLAR_CIRCUMFERENCE);return[a[0]-t,a[1]-e]}}]),t}(),S=function(t){w(n,C);var e=E(n);function n(t){var r;return M(this,n),(r=e.call(this)).input=t,r}return N(n,[{key:"upright",value:function(){return this.input.upright()}},{key:"bounds",value:function(){return this.input.bounds()}},{key:"metersPerUnit",value:function(){return this.input.metersPerUnit()}}]),n}(),P=function(t){w(n,S);var e=E(n);function n(){return M(this,n),e.apply(this,arguments)}return N(n,[{key:"toGeo",value:function(t,e){return this.input.toGeo(t,-e)}},{key:"fromGeo",value:function(t,e){var n=this.input.fromGeo(t,e);return n[1]=-n[1],n}},{key:"upright",value:function(){return!this.input.upright()}},{key:"bounds",value:function(){var t=this.input.bounds();return new[t[0],-t[3],t[2],-t[1]]}}]),n}(),B=function(t){w(n,S);var e=E(n);function n(t,r,o){var a;return M(this,n),(a=e.call(this,t)).scaleX=r,a.scaleY=o||r,a}return N(n,[{key:"toGeo",value:function(t,e){return this.input.toGeo(t/this.scaleX,e/this.scaleY)}},{key:"fromGeo",value:function(t,e){var n=this.input.fromGeo(t,e);return n[0]*=this.scaleX,n[1]*=this.scaleY,n}},{key:"upright",value:function(){return!!(this.scaleY<0^this.input.upright())}},{key:"bounds",value:function(){var t=this.input.bounds();return t[0]*=this.scaleX,t[1]*=this.scaleY,t[2]*=this.scaleX,t[3]*=this.scaleY,t}},{key:"metersPerUnit",value:function(){return this.input.metersPerUnit()/Math.sqrt((this.scaleX*this.scaleX+this.scaleY*this.scaleY)/2)}}]),n}(),x=function(t){w(n,C);var e=E(n);function n(){var t;M(this,n),(t=e.call(this)).ARC=2*Math.asin(Math.sqrt(5-Math.sqrt(5))/Math.sqrt(10)),t.TO_RADIANS=Math.PI/180,t.ROOT3=Math.sqrt(3),t.newton=5,t.VERT=[10.536199,64.7,-5.24539,2.300882,58.157706,10.447378,122.3,39.1,-143.47849,50.103201,-67.13233,23.717925,36.52151,-50.1032,112.867673,-23.71793,174.75461,-2.300882,-121.84229,-10.44735,-57.7,-39.1,-169.4638,-64.7],t.ISO=[2,1,6,1,0,2,0,1,5,1,5,10,1,6,10,7,2,6,2,3,7,3,0,2,0,3,4,4,0,5,5,4,9,9,5,10,10,9,11,11,6,10,6,7,11,8,3,7,8,3,4,8,4,9,9,8,11,7,8,11,11,6,7,3,7,8],t.CENTER_MAP=[-3,7,-2,5,-1,7,2,5,4,5,-4,1,-3,-1,-2,1,-1,-1,0,1,1,-1,2,1,3,-1,4,1,5,-1,-3,-5,-1,-5,1,-5,2,-7,-4,-7,-5,-5,-2,-7],t.FLIP_TRIANGLE=[1,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,0,1,0],t.CENTROID=new Array(66),t.ROTATION_MATRIX=new Array(198),t.INVERSE_ROTATION_MATRIX=new Array(198);for(var r=0;r<22;r++)t.CENTER_MAP[2*r]*=.5*t.ARC,t.CENTER_MAP[2*r+1]*=t.ARC*t.ROOT3/12;for(var o=0;o<12;o++)t.VERT[2*o+1]=90-t.VERT[2*o+1],t.VERT[2*o]*=t.TO_RADIANS,t.VERT[2*o+1]*=t.TO_RADIANS;for(var a=0;a<22;a++){var i=t.cart(t.VERT[2*t.ISO[3*a]],t.VERT[2*t.ISO[3*a]+1]),c=t.cart(t.VERT[2*t.ISO[3*a+1]],t.VERT[2*t.ISO[3*a+1]+1]),s=t.cart(t.VERT[2*t.ISO[3*a+2]],t.VERT[2*t.ISO[3*a+2]+1]),u=i[0]+c[0]+s[0],l=i[1]+c[1]+s[1],f=i[2]+c[2]+s[2],h=Math.sqrt(u*u+l*l+f*f);t.CENTROID[3*a]=u/h,t.CENTROID[3*a+1]=l/h,t.CENTROID[3*a+2]=f/h;var d=Math.atan2(l,u),p=Math.atan2(Math.sqrt(u*u+l*l),f),y=[t.VERT[2*t.ISO[3*a]],t.VERT[2*t.ISO[3*a]+1]];y=t.yRot(y[0]-d,y[1],-p),t.produceZYZRotationMatrix(t.ROTATION_MATRIX,9*a,-d,-p,Math.PI/2-y[0]),t.produceZYZRotationMatrix(t.INVERSE_ROTATION_MATRIX,9*a,y[0]-Math.PI/2,p,d)}return t.FACE_ON_GRID=[-1,-1,0,1,2,-1,-1,3,-1,4,-1,-1,5,6,7,8,9,10,11,12,13,14,20,19,15,21,16,-1,17,18,-1,-1,-1],t.Z=Math.sqrt(5+2*Math.sqrt(5))/Math.sqrt(15),t.EL=Math.sqrt(8)/Math.sqrt(5+Math.sqrt(5)),t.EL6=t.EL/6,t.DVE=Math.sqrt(3+Math.sqrt(5))/Math.sqrt(5+Math.sqrt(5)),t.R=-3*t.EL6/t.DVE,t.OUT_OF_BOUNDS=[NaN,NaN],t}return N(n,[{key:"produceZYZRotationMatrix",value:function(t,e,n,r,o){var a=Math.sin(n),i=Math.cos(n),c=Math.sin(r),s=Math.cos(r),u=Math.sin(o),l=Math.cos(o);t[e+0]=i*s*l-u*a,t[e+1]=-a*s*l-u*i,t[e+2]=l*c,t[e+3]=u*s*i+l*a,t[e+4]=l*i-u*s*a,t[e+5]=u*c,t[e+6]=-c*i,t[e+7]=c*a,t[e+8]=s}},{key:"cart",value:function(t,e){var n=Math.sin(e);return[n*Math.cos(t),n*Math.sin(t),Math.cos(e)]}},{key:"findTriangle",value:function(t,e,n){for(var r=Number.MAX_VALUE,o=0,a=0;a<20;a++){var i=this.CENTROID[3*a]-t,c=this.CENTROID[3*a+1]-e,s=this.CENTROID[3*a+2]-n,u=i*i+c*c+s*s;if(u<r){if(u<.1)return a;o=a,r=u}}return o}},{key:"findMapTriangle",value:function(t,e){for(var n=Number.MAX_VALUE,r=0,o=0;o<20;o++){var a=this.CENTER_MAP[2*o]-t,i=this.CENTER_MAP[2*o+1]-e,c=a*a+i*i;c<n&&(r=o,n=c)}return r}},{key:"findTriangleGrid",value:function(t,e){var n,r=t/this.ARC,o=e/(this.ARC*this.ROOT3);if(o>-.25)if(o<.25)n=1;else{if(!(o<=.75))return-1;n=0,o=.5-o}else{if(!(o>=-.75))return-1;n=2,o=-o-.5}var a=r-(o+=.25),i=r+o,c=Math.floor(a),s=2*c+(Math.floor(i)!==c?1:0)+6;return s<0||s>=11?-1:this.FACE_ON_GRID[11*n+s]}},{key:"triangleTransform",value:function(t,e,n){var r=this.Z/n,o=r*t,a=r*e,i=Math.atan((2*a/this.ROOT3-this.EL6)/this.DVE),c=Math.atan((o-a/this.ROOT3-this.EL6)/this.DVE),s=Math.atan((-o-a/this.ROOT3-this.EL6)/this.DVE);return[.5*(c-s),(2*i-c-s)/(2*this.ROOT3)]}},{key:"inverseTriangleTransformNewton",value:function(t,e){for(var n=Math.tan(this.ROOT3*e+t),r=Math.tan(2*t),o=n*n+1,a=r*r+1,i=n,c=r,s=0,u=1,l=1,f=0;f<this.newton;f++)i=((s-=(i+c+s-this.R)/(o*u*u+a*l*l+1))+n)*(u=1/(1-s*n)),c=(s+r)*(l=1/(1-s*r));var h=this.ROOT3*(this.DVE*i+this.EL6)/2,d=(this.DVE*c+h/this.ROOT3+this.EL6)/this.Z,p=h/this.Z,y=1/Math.sqrt(1+d*d+p*p);return[y*d,y*p,y]}},{key:"inverseTriangleTransformCbrt",value:function(t,e){var n=Math.tan(this.ROOT3*e+t),r=Math.tan(2*t),o=r*n,a=-(this.R*r*n+2*r+2*n),i=3+this.R*r+this.R*n-2*r*n,c=-a/(3*o),s=c*c*c+(a*i-3*o*(r+n-this.R))/(6*o*o),u=i/(3*o)-c*c,l=Math.sqrt(-(s*s+u*u*u)),f=Math.sqrt(l*l+s*s),h=Math.atan2(l,s),d=2*Math.cbrt(f)*Math.cos(h/3)+c,p=(d+n)/(1-d*n),y=(d+r)/(1-d*r),g=this.ROOT3*(this.DVE*p+this.EL6)/2,b=(this.DVE*y+g/this.ROOT3+this.EL6)/this.Z,v=g/this.Z,m=1/Math.sqrt(1+b*b+v*v);return[m*b,m*v,m]}},{key:"inverseTriangleTransformCbrtNewton",value:function(t,e){for(var n=Math.tan(this.ROOT3*e+t),r=Math.tan(2*t),o=n+r,a=r*n,i=-(this.R*a+2*r+2*n),c=3+this.R*o-2*a,s=o-this.R,u=3*a,l=2*i,f=-s/c,h=0;h<this.newton;h++){var d=f*f;f-=(a*d*f+i*d+c*f+s)/(u*d+l*f+c)}var p=(f+n)/(1-f*n),y=(f+r)/(1-f*r),g=this.ROOT3*(this.DVE*p+this.EL6)/2,b=(this.DVE*y+g/this.ROOT3+this.EL6)/this.Z,v=g/this.Z,m=1/Math.sqrt(1+b*b+v*v);return[m*b,m*v,m]}},{key:"inverseTriangleTransform",value:function(t,e){return this.inverseTriangleTransformNewton(t,e)}},{key:"yRot",value:function(t,e,n){var r=this.cart(t,e),o=r[0];r[0]=r[2]*Math.sin(n)+o*Math.cos(n),r[2]=r[2]*Math.cos(n)-o*Math.sin(n);var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);return r[0]/=a,r[1]/=a,r[2]/=a,[Math.atan2(r[1],r[0]),Math.atan2(Math.sqrt(r[0]*r[0]+r[1]*r[1]),r[2])]}},{key:"fromGeo",value:function(t,e){e=90-e,t*=this.TO_RADIANS,e*=this.TO_RADIANS;var n=Math.sin(e),r=Math.cos(t)*n,o=Math.sin(t)*n,a=Math.cos(e),i=this.findTriangle(r,o,a),c=9*i,s=r*this.ROTATION_MATRIX[c+0]+o*this.ROTATION_MATRIX[c+1]+a*this.ROTATION_MATRIX[c+2],u=r*this.ROTATION_MATRIX[c+3]+o*this.ROTATION_MATRIX[c+4]+a*this.ROTATION_MATRIX[c+5],l=r*this.ROTATION_MATRIX[c+6]+o*this.ROTATION_MATRIX[c+7]+a*this.ROTATION_MATRIX[c+8],f=this.triangleTransform(s,u,l);return 0!==this.FLIP_TRIANGLE[i]&&(f[0]=-f[0],f[1]=-f[1]),r=f[0],(15===i&&r>f[1]*this.ROOT3||14===i)&&r>0&&(f[0]=.5*r-.5*this.ROOT3*f[1],f[1]=.5*this.ROOT3*r+.5*f[1],i+=6),f[0]+=this.CENTER_MAP[2*i],f[1]+=this.CENTER_MAP[2*i+1],f}},{key:"toGeo",value:function(t,e){var n=this.findTriangleGrid(t,e);if(-1===n)return this.OUT_OF_BOUNDS;switch(t-=this.CENTER_MAP[2*n],e-=this.CENTER_MAP[2*n+1],n){case 14:if(t>0)return this.OUT_OF_BOUNDS;break;case 20:if(-e*this.ROOT3>t)return this.OUT_OF_BOUNDS;break;case 15:if(t>0&&t>e*this.ROOT3)return this.OUT_OF_BOUNDS;break;case 21:if(t<0||-e*this.ROOT3>t)return this.OUT_OF_BOUNDS}0!==this.FLIP_TRIANGLE[n]&&(t=-t,e=-e);var r=this.inverseTriangleTransform(t,e);t=r[0],e=r[1];var o=r[2],a=9*n,i=t*this.INVERSE_ROTATION_MATRIX[a+0]+e*this.INVERSE_ROTATION_MATRIX[a+1]+o*this.INVERSE_ROTATION_MATRIX[a+2],c=t*this.INVERSE_ROTATION_MATRIX[a+3]+e*this.INVERSE_ROTATION_MATRIX[a+4]+o*this.INVERSE_ROTATION_MATRIX[a+5],s=t*this.INVERSE_ROTATION_MATRIX[a+6]+e*this.INVERSE_ROTATION_MATRIX[a+7]+o*this.INVERSE_ROTATION_MATRIX[a+8];return[Math.atan2(c,i)/this.TO_RADIANS,90-Math.acos(s)/this.TO_RADIANS]}},{key:"bounds",value:function(){return[-3*this.ARC,-.75*this.ARC*this.ROOT3,2.5*this.ARC,.75*this.ARC*this.ROOT3]}},{key:"upright",value:function(){return!1}},{key:"metersPerUnit",value:function(){return Math.sqrt(5101e11/(20*this.ROOT3*this.ARC*this.ARC/4))}}]),n}(),L=function(t){w(n,x);var e=E(n);function n(){var t;M(this,n),(t=e.call(this)).VECTOR_SCALE_FACTOR=.8715371854532509;for(var r=null,o=new Array(257),a=new Array(o.length),i=0;i<o.length;i++)o[i]=[];for(var c=0;c<a.length;c++)a[c]=[];try{if((r=context.getSafeOpenFile("craftscripts/data","conformal","txt")).exists()){for(var s=new BufferedReader(new FileReader(r)),u=0;u<o.length;u++){var l=new Array(o.length-u),f=new Array(o.length-u);o[u]=l,a[u]=f}for(var h=0;h<o.length;h++)for(var d=0;d<o.length-h;d++){var p=s.readLine(),y=(p=p.substring(1,p.length()-3)).split(", ");o[d][h]=Number.parseFloat(y[0])*t.VECTOR_SCALE_FACTOR,a[d][h]=Number.parseFloat(y[1])*t.VECTOR_SCALE_FACTOR}}else player.printError("Conformal.txt doesn't exist.");s.close()}catch(g){player.printError("Can't load conformal: "+g)}return t.inverse=new D(o,a),t}return N(n,[{key:"triangleTransform",value:function(t,e,r){var o=j(k(n.prototype),"triangleTransform",this).call(this,t,e,r);return t=o[0],e=o[1],o[0]/=this.ARC,o[1]/=this.ARC,o[0]+=.5,o[1]+=this.ROOT3/6,(o=this.inverse.applyNewtonsMethod(t,e,o[0],o[1],5))[0]-=.5,o[1]-=this.ROOT3/6,o[0]*=this.ARC,o[1]*=this.ARC,o}},{key:"inverseTriangleTransform",value:function(t,e){t/=this.ARC,e/=this.ARC,t+=.5,e+=this.ROOT3/6;var r=this.inverse.getInterpolatedVector(t,e);return j(k(n.prototype),"inverseTriangleTransform",this).call(this,r[0],r[1])}},{key:"metersPerUnit",value:function(){return 40075017/(2*Math.PI)/this.VECTOR_SCALE_FACTOR}}]),n}(),V=function(t){w(n,L);var e=E(n);function n(){var t;return M(this,n),(t=e.call(this)).THETA=-150*t.TO_RADIANS,t.SIN_THETA=Math.sin(t.THETA),t.COS_THETA=Math.cos(t.THETA),t.BERING_X=-.3420420960118339,t.BERING_Y=-.322211064085279,t.ARCTIC_Y=-.2,t.ARCTIC_M=(t.ARCTIC_Y-t.ROOT3*t.ARC/4)/(t.BERING_X- -.5*t.ARC),t.ARCTIC_B=t.ARCTIC_Y-t.ARCTIC_M*t.BERING_X,t.ALEUTIAN_Y=-.5000446805492526,t.ALEUTIAN_XL=-.5149231279757507,t.ALEUTIAN_XR=-.45,t.ALEUTIAN_M=(t.BERING_Y-t.ALEUTIAN_Y)/(t.BERING_X-t.ALEUTIAN_XR),t.ALEUTIAN_B=t.BERING_Y-t.ALEUTIAN_M*t.BERING_X,t}return N(n,[{key:"fromGeo",value:function(t,e){var r=j(k(n.prototype),"fromGeo",this).call(this,t,e),o=r[0],a=r[1],i=this.isEurasianPart(o,a);if(a-=.75*this.ARC*this.ROOT3,i){var c=o+=this.ARC;o=this.COS_THETA*o-this.SIN_THETA*a,a=this.SIN_THETA*c+this.COS_THETA*a}else o-=this.ARC;return r[0]=a,r[1]=-o,r}},{key:"toGeo",value:function(t,e){var r;r=e<0?t>0:e>this.ARC/2?t>-this.ROOT3*this.ARC/2:e*-this.ROOT3<t;var o=t;return t=-e,e=o,r?(o=t,t=this.COS_THETA*t+this.SIN_THETA*e,e=this.COS_THETA*e-this.SIN_THETA*o,t-=this.ARC):t+=this.ARC,e+=.75*this.ARC*this.ROOT3,r!==this.isEurasianPart(t,e)?this.OUT_OF_BOUNDS:j(k(n.prototype),"toGeo",this).call(this,t,e)}},{key:"isEurasianPart",value:function(t,e){return!(t>0)&&(t<-.5*this.ARC||(e>this.ROOT3*this.ARC/4?t<0:e<this.ALEUTIAN_Y?e<this.ALEUTIAN_Y+this.ALEUTIAN_XL-t:e>this.BERING_Y?e<this.ARCTIC_Y?t<this.BERING_X:e<this.ARCTIC_M*t+this.ARCTIC_B:e>this.ALEUTIAN_M*t+this.ALEUTIAN_B))}},{key:"bounds",value:function(){return[-1.5*this.ARC*this.ROOT3,-1.5*this.ARC,3*this.ARC,this.ROOT3*this.ARC]}}]),n}(),D=function(){function t(e,n){M(this,t),this.ROOT3=Math.sqrt(3),this.sideLength=e.length-1,this.VECTOR_X=e,this.VECTOR_Y=n}return N(t,[{key:"getInterpolatedVector",value:function(t,e){t*=this.sideLength;var n,r,o,a,i,c,s,u,l=2*(e*=this.sideLength)/this.ROOT3,f=t-.5*l,h=Math.trunc(f),d=Math.trunc(l);h<0?h=0:h>=this.sideLength&&(h=this.sideLength-1),d<0?d=0:d>=this.sideLength-h&&(d=this.sideLength-h-1);var p=1;e<-this.ROOT3*(t-h-d-1)||d===this.sideLength-h-1?(n=this.VECTOR_X[h][d],r=this.VECTOR_Y[h][d],o=this.VECTOR_X[h][d+1],a=this.VECTOR_Y[h][d+1],i=this.VECTOR_X[h+1][d],c=this.VECTOR_Y[h+1][d],s=.5*this.ROOT3*d,u=h+1+.5*d):(n=this.VECTOR_X[h][d+1],r=this.VECTOR_Y[h][d+1],o=this.VECTOR_X[h+1][d],a=this.VECTOR_Y[h+1][d],i=this.VECTOR_X[h+1][d+1],c=this.VECTOR_Y[h+1][d+1],p=-1,e=-e,s=-.5*this.ROOT3*(d+1),u=h+1+.5*(d+1));var y=-(e-s)/this.ROOT3-(t-u),g=2*(e-s)/this.ROOT3,b=1-y-g;return[n*y+o*g+i*b,r*y+a*g+c*b,(i-n)*this.sideLength,this.sideLength*p*(2*o-n-i)/this.ROOT3,(c-r)*this.sideLength,this.sideLength*p*(2*a-r-c)/this.ROOT3]}},{key:"applyNewtonsMethod",value:function(t,e,n,r,o){for(var a=0;a<o;a++){var i=this.getInterpolatedVector(n,r),c=i[0]-t,s=i[1]-e,u=i[2],l=i[3],f=i[4],h=i[5],d=1/(u*h-l*f);n-=d*(h*c-l*s),r-=d*(-f*c+u*s)}return[n,r]}}]),t}(),G={};Object.defineProperty(G,"__esModule",{value:!0}),G.request=function(t,e,n,r){player.print("\xa77Please wait...");var o=function(t){for(var e=(0,q.default)(),n=0;n<t.length;n++)t[n]=e.toGeo.apply(e,function(t){if(Array.isArray(t))return F(t)}(r=t[n])||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return F(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(t,void 0):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var r;return t}(function(t,e){var n=Math.sqrt(2)/2*t;return[[e.x+t,e.z],[e.x-t,e.z],[e.x,e.z-t],[e.x,e.z+t],[e.x+n,e.z+n],[e.x-n,e.z-n],[e.x+n,e.z-n],[e.x-n,e.z+n]]}(t,e)),a=function(t){for(var e=[0,0],n=Number.MAX_VALUE,r=0;r<t.length;r++){var o=t[r][0]+t[r][1];o<n&&(e=t[r],n=o)}return[e[1],e[0]]}(o),i=function(t){for(var e=[0,0],n=Number.NEGATIVE_INFINITY,r=0;r<t.length;r++){var o=t[r][0]+t[r][1];o>n&&(e=t[r],n=o)}return[e[1],e[0]]}(o),c=n(a,i);(0,U.default)(c,(function(t,e){if(t)throw t;r(e)}))};var U=X(_),q=X(A);function X(t){return t&&t.__esModule?t:{default:t}}function F(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Y={};Object.defineProperty(Y,"__esModule",{value:!0}),Y.default=function(t){return function(t){for(var e=(0,H.default)(),n=[],r=0;r<t.length;r++)for(var o=t[r],a=0;a<o.length-1;a++){var i=W(e.fromGeo.apply(e,z(o[a])),2),c=i[0],s=i[1],u=W(e.fromGeo.apply(e,z(o[a+1])),2),l=u[0],f=u[1];n.push([c,s,l,f])}return player.print("\xa77".concat(n.length," lines to draw")),n}(function(t){if("FeatureCollection"!==t.type)throw K;if(!Array.isArray(t.features))throw K;for(var e=[],n=0;n<t.features.length;n++)if("Polygon"===t.features[n].geometry.type)for(var r=t.features[n].geometry.coordinates,o=0;o<r.length;o++){var a=r[o];e.push(a)}else if("LineString"===t.features[n].geometry.type){var i=t.features[n].geometry.coordinates;e.push(i)}return e}(t))};var $,H=($=A)&&$.__esModule?$:{default:$};function z(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Z(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,e)||Z(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,e){if(t){if("string"==typeof t)return J(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var K=new Error("Incorrect data format"),Q={};function tt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return et(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(Q,"__esModule",{value:!0}),Q.draw=function(t,e){for(var n=player.getLocation().y,r=0;r<t.length;r++){var o=tt(t[r],4);at(o[0],n,o[1],o[2],n,o[3],e)}},Q.findGround=function(t){if(t.onGround){var e=context.remember();return t.ignoreVegetation||(t.ignoredBlocks=[context.getBlock("air").id]),function(n){for(;!t.ignoredBlocks.includes(e.getBlock(n.add(nt)).id);)n=n.add(nt);for(;t.ignoredBlocks.includes(e.getBlock(n).id);)n=n.add(rt);return n}}return function(t){return t}},Q.ignoreBuildings=function(t){if(t.ignoreBuildings){var e=context.remember();return function(n){return t.allowedBlocks.includes(e.getBlock(n).id)}}return function(t){return!0}},Q.setOffset=function(t){if(t.offset){var e=nt.multiply(t.offset);return function(t){return t.add(e)}}return function(t){return t}},Q.setWall=function(t){var e=context.remember(),n=context.getBlock(t.block);if(t.height){var r=Number.parseInt(t.height);return function(t){for(var o=0;o<r;o++)e.setBlock(t,n),t=t.add(nt),ot++}}return function(t){e.setBlock(t,n),ot++}},Q.printBlocks=function(){player.print("Operation completed (".concat(ot," blocks affected)."))},importClass(Packages.com.sk89q.worldedit.Vector);var nt=Vector.UNIT_Y,rt=Vector.UNIT_Y.multiply(-1),ot=0;function at(t,e,n,r,o,a,i){for(var c=r-t,s=o-e,u=a-n,l=Math.max(Math.abs(c),Math.abs(s),Math.abs(u)),f=c/l,h=s/l,d=u/l,p=Math.max(Math.abs(f),Math.abs(h),Math.abs(d)),y=0;y<l;y+=p)i(new Vector(t+f*y|0,e+h*y|0,n+d*y|0))}var it={};Object.defineProperty(it,"__esModule",{value:!0}),it.rails=function(t){(0,G.request)(t.radius,t.center,(function(e,n){return'(way[railway~"'.concat(t.regex,'"](').concat(e.join(","),",").concat(n.join(","),");>;);out;")}),(function(e){var n=(0,st.default)(e),r=(0,Q.findGround)(t),o=(0,Q.ignoreBuildings)(t),a=(0,Q.setOffset)(t),i=(0,Q.setWall)(t);(0,Q.draw)(n,(function(t){t=r(t),o(t)&&(t=a(t),i(t))})),(0,Q.printBlocks)()}))};var ct,st=(ct=Y)&&ct.__esModule?ct:{default:ct};importPackage(Packages.com.sk89q.worldedit),importPackage(Packages.com.sk89q.worldedit.math),importPackage(Packages.com.sk89q.worldedit.blocks);var ut={};Object.defineProperty(ut,"__esModule",{value:!0}),ut.allowedBlocks=ut.ignoredBlocks=void 0,ut.ignoredBlocks=["air","tallgrass","sapling","log","log2","leaves","leaves2","deadbush","red_flower","yellow_flower","red_mushroom","brown_mushroom","vine","waterlily","cactus","reeds","pumpkin","melon_block","snow_layer","double_plant"],ut.allowedBlocks=["air","grass","dirt","stone","sand","grass_path","concrete","gravel","water","lava"];var lt={};Object.defineProperty(lt,"__esModule",{value:!0}),lt.getRadius=function(t){var e=Math.abs(t.pos1.x-t.pos2.x),n=Math.abs(t.pos1.z-t.pos2.z);return Math.sqrt(e*e+n*n)/2},lt.getRegion=function(){return ft.getRegionSelector(player.getWorld()).getRegion()},lt.transformIDs=function(t,e){"ignoredBlocks"!==e||t[e].includes("air")||t[e].push("air"),t[e]=t[e].map((function(t){return context.getBlock(t).id}))};var ft=context.getSession();function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}importPackage(Packages.com.sk89q.worldedit),importPackage(Packages.com.sk89q.worldedit.math),importPackage(Packages.com.sk89q.worldedit.blocks),context.checkArgs(0,1,n.rails);var pt=(0,lt.getRegion)(),yt=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){dt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({block:"iron_block",height:1,offset:0,regex:"^.*$",radius:(0,lt.getRadius)(pt),center:pt.center,onGround:!0,ignoreBuildings:!0,ignoreVegetation:!0,restrict:!1,ignoredBlocks:ut.ignoredBlocks,allowedBlocks:ut.allowedBlocks},JSON.parse(argv[1]||"{}"));(0,lt.transformIDs)(yt,"ignoredBlocks"),(0,lt.transformIDs)(yt,"allowedBlocks"),(0,it.rails)(yt)}();