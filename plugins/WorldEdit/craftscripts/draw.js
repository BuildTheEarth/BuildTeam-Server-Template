!function(){var t={entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}},e={},n=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,r=new RegExp("[\\-\\.0-9"+n.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+n.source+r.source+"*(?::"+n.source+r.source+"*)?$");function a(){}function i(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function c(t,e,n,r,o,a){for(var i,c=++e,s=0;;){var u=t.charAt(c);switch(u){case"=":if(1===s)i=t.slice(e,c),s=3;else{if(2!==s)throw new Error("attribute equal must after attrName");s=3}break;case"'":case'"':if(3===s||1===s){if(1===s&&(a.warning('attribute value must after "="'),i=t.slice(e,c)),e=c+1,!((c=t.indexOf(u,e))>0))throw new Error("attribute value no end '"+u+"' match");l=t.slice(e,c).replace(/&#?\w+;/g,o),n.add(i,l,e-1),s=5}else{if(4!=s)throw new Error('attribute value must after "="');l=t.slice(e,c).replace(/&#?\w+;/g,o),n.add(i,l,e),a.warning('attribute "'+i+'" missed start quot('+u+")!!"),e=c+1,s=5}break;case"/":switch(s){case 0:n.setTagName(t.slice(e,c));case 5:case 6:case 7:s=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==s&&n.setTagName(t.slice(e,c)),c;case">":switch(s){case 0:n.setTagName(t.slice(e,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(l=t.slice(e,c)).slice(-1)&&(n.closed=!0,l=l.slice(0,-1));case 2:2===s&&(l=i),4==s?(a.warning('attribute "'+l+'" missed quot(")!!'),n.add(i,l.replace(/&#?\w+;/g,o),e)):("http://www.w3.org/1999/xhtml"===r[""]&&l.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),n.add(l,l,e));break;case 3:throw new Error("attribute value missed!!")}return c;case"\x80":u=" ";default:if(u<=" ")switch(s){case 0:n.setTagName(t.slice(e,c)),s=6;break;case 1:i=t.slice(e,c),s=2;break;case 4:var l=t.slice(e,c).replace(/&#?\w+;/g,o);a.warning('attribute "'+l+'" missed quot(")!!'),n.add(i,l,e);case 5:s=6}else switch(s){case 2:n.tagName,"http://www.w3.org/1999/xhtml"===r[""]&&i.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+i+'" missed value!! "'+i+'" instead2!!'),n.add(i,i,e),e=c,s=1;break;case 5:a.warning('attribute space is required"'+i+'"!!');case 6:s=1,e=c;break;case 3:s=4,e=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function s(t,e,n){for(var r=t.tagName,o=null,a=t.length;a--;){var i=t[a],c=i.qName,s=i.value;if((d=c.indexOf(":"))>0)var u=i.prefix=c.slice(0,d),l=c.slice(d+1),f="xmlns"===u&&l;else l=c,u=null,f="xmlns"===c&&"";i.localName=l,!1!==f&&(null==o&&(o={},h(n,n={})),n[f]=o[f]=s,i.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(f,s))}for(a=t.length;a--;)(u=(i=t[a]).prefix)&&("xml"===u&&(i.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==u&&(i.uri=n[u||""]));var d;(d=r.indexOf(":"))>0?(u=t.prefix=r.slice(0,d),l=t.localName=r.slice(d+1)):(u=null,l=t.localName=r);var p=t.uri=n[u||""];if(e.startElement(p,l,r,t),!t.closed)return t.currentNSMap=n,t.localNSMap=o,!0;if(e.endElement(p,l,r),o)for(u in o)e.endPrefixMapping(u)}function u(t,e,n,r,o){if(/^(?:script|textarea)$/i.test(n)){var a=t.indexOf("</"+n+">",e),i=t.substring(e+1,a);if(/[&<]/.test(i))return/^script$/i.test(n)?(o.characters(i,0,i.length),a):(i=i.replace(/&#?\w+;/g,r),o.characters(i,0,i.length),a)}return e+1}function l(t,e,n,r){var o=r[n];return null==o&&((o=t.lastIndexOf("</"+n+">"))<e&&(o=t.lastIndexOf("</"+n)),r[n]=o),o<e}function h(t,e){for(var n in t)e[n]=t[n]}function f(t,e,n,r){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(o=t.indexOf("--\x3e",e+4))>e?(n.comment(t,e+4,o-e-4),o+3):(r.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var o=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,o-e-9),n.endCDATA(),o+3}var a=function(t,e){var n,r=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(o.lastIndex=e,o.exec(t);n=o.exec(t);)if(r.push(n),n[1])return r}(t,e),i=a.length;if(i>1&&/!doctype/i.test(a[0][0])){var c=a[1][0],s=i>3&&/^public$/i.test(a[2][0])&&a[3][0],u=i>4&&a[4][0],l=a[i-1];return n.startDTD(c,s&&s.replace(/^(['"])(.*?)\1$/,"$2"),u&&u.replace(/^(['"])(.*?)\1$/,"$2")),n.endDTD(),l.index+l[0].length}}return-1}function d(t,e,n){var r=t.indexOf("?>",e);if(r){var o=t.substring(e,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return o?(o[0].length,n.processingInstruction(o[1],o[2]),r+2):-1}return-1}function p(t){}a.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),h(e,e={}),function(t,e,n,r,o){function a(t){var e=t.slice(1,-1);return e in n?n[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(o.error("entity not found:"+t),t)}function h(e){if(e>E){var n=t.substring(E,e).replace(/&#?\w+;/g,a);T&&m(E),r.characters(n,0,e-E),E=e}}function m(e,n){for(;e>=b&&(n=v.exec(t));)g=n.index,b=g+n[0].length,T.lineNumber++;T.columnNumber=e-g+1}for(var g=0,b=0,v=/.*(?:\r\n?|\n)|.*$/g,T=r.locator,N=[{currentNSMap:e}],y={},E=0;;){try{var O=t.indexOf("<",E);if(O<0){if(!t.substr(E).match(/^\s*$/)){var R=r.doc,w=R.createTextNode(t.substr(E));R.appendChild(w),r.currentElement=w}return}switch(O>E&&h(O),t.charAt(O+1)){case"/":var A=t.indexOf(">",O+3),_=t.substring(O+2,A),I=N.pop();A<0?(_=t.substring(O+2).replace(/[\s<].*/,""),o.error("end tag name: "+_+" is not complete:"+I.tagName),A=O+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),o.error("end tag name: "+_+" maybe not complete"),A=O+1+_.length);var C=I.localNSMap,j=I.tagName==_;if(j||I.tagName&&I.tagName.toLowerCase()==_.toLowerCase()){if(r.endElement(I.uri,I.localName,_),C)for(var M in C)r.endPrefixMapping(M);j||o.fatalError("end tag name: "+_+" is not match the current start tagName:"+I.tagName)}else N.push(I);A++;break;case"?":T&&m(O),A=d(t,O,r);break;case"!":T&&m(O),A=f(t,O,r,o);break;default:T&&m(O);var S=new p,x=N[N.length-1].currentNSMap,D=(A=c(t,O,S,x,a,o),S.length);if(!S.closed&&l(t,A,S.tagName,y)&&(S.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),T&&D){for(var k=i(T,{}),P=0;P<D;P++){var B=S[P];m(B.offset),B.locator=i(T,{})}r.locator=k,s(S,r,x)&&N.push(S),r.locator=T}else s(S,r,x)&&N.push(S);"http://www.w3.org/1999/xhtml"!==S.uri||S.closed?A++:A=u(t,A,S.tagName,a,r)}}catch(L){o.error("element parse error: "+L),A=-1}A>E?E=A:h(Math.max(O,E)+1)}}(t,e,n,r,this.errorHandler),r.endDocument()}},p.prototype={setTagName:function(t){if(!o.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,n){if(!o.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=a;var m={};function g(t,e){for(var n in t)e[n]=t[n]}function b(t,e){var n=t.prototype;if(!(n instanceof e)){function r(){}r.prototype=e.prototype,g(n,r=new r),t.prototype=n=r}n.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),n.constructor=t)}var v={},T=v.ELEMENT_NODE=1,N=v.ATTRIBUTE_NODE=2,y=v.TEXT_NODE=3,E=v.CDATA_SECTION_NODE=4,O=v.ENTITY_REFERENCE_NODE=5,R=v.ENTITY_NODE=6,w=v.PROCESSING_INSTRUCTION_NODE=7,A=v.COMMENT_NODE=8,_=v.DOCUMENT_NODE=9,I=v.DOCUMENT_TYPE_NODE=10,C=v.DOCUMENT_FRAGMENT_NODE=11,j=v.NOTATION_NODE=12,M={},S={},x=(M.INDEX_SIZE_ERR=(S[1]="Index size error",1),M.DOMSTRING_SIZE_ERR=(S[2]="DOMString size error",2),M.HIERARCHY_REQUEST_ERR=(S[3]="Hierarchy request error",3)),D=(M.WRONG_DOCUMENT_ERR=(S[4]="Wrong document",4),M.INVALID_CHARACTER_ERR=(S[5]="Invalid character",5),M.NO_DATA_ALLOWED_ERR=(S[6]="No data allowed",6),M.NO_MODIFICATION_ALLOWED_ERR=(S[7]="No modification allowed",7),M.NOT_FOUND_ERR=(S[8]="Not found",8)),k=(M.NOT_SUPPORTED_ERR=(S[9]="Not supported",9),M.INUSE_ATTRIBUTE_ERR=(S[10]="Attribute in use",10));function P(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,S[t]),this.message=S[t],Error.captureStackTrace&&Error.captureStackTrace(this,P);return n.code=t,e&&(this.message=this.message+": "+e),n}function B(){}function L(t,e){this._node=t,this._refresh=e,V(this)}function V(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);mt(t,"length",n.length),g(n,t),t._inc=e}}function U(){}function F(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function q(t,e,n,r){if(r?e[F(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var o=t.ownerDocument;o&&(r&&z(o,t,r),function(t,e,n){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&(e._nsMap[n.prefix?n.localName:""]=n.value)}(o,t,n))}}function G(t,e,n){var r=F(e,n);if(!(r>=0))throw P(D,new Error(t.tagName+"@"+n));for(var o=e.length-1;r<o;)e[r]=e[++r];if(e.length=o,t){var a=t.ownerDocument;a&&(z(a,t,n),n.ownerElement=null)}}function X(t){if(this._features={},t)for(var e in t)this._features=t[e]}function Y(){}function $(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function H(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(H(t,e))return!0}while(t=t.nextSibling)}function Z(){}function z(t,e,n,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==n.namespaceURI&&delete e._nsMap[n.prefix?n.localName:""]}function W(t,e,n){if(t&&t._inc){t._inc++;var r=e.childNodes;if(n)r[r.length++]=n;else{for(var o=e.firstChild,a=0;o;)r[a++]=o,o=o.nextSibling;r.length=a}}}function J(t,e){var n=e.previousSibling,r=e.nextSibling;return n?n.nextSibling=r:t.firstChild=r,r?r.previousSibling=n:t.lastChild=n,W(t.ownerDocument,t),e}function Q(t,e,n){var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===C){var o=e.firstChild;if(null==o)return e;var a=e.lastChild}else o=a=e;var i=n?n.previousSibling:t.lastChild;o.previousSibling=i,a.nextSibling=n,i?i.nextSibling=o:t.firstChild=o,null==n?t.lastChild=a:n.previousSibling=a;do{o.parentNode=t}while(o!==a&&(o=o.nextSibling));return W(t.ownerDocument||t,t),e.nodeType==C&&(e.firstChild=e.lastChild=null),e}function K(){this._nsMap={}}function tt(){}function et(){}function nt(){}function rt(){}function ot(){}function at(){}function it(){}function ct(){}function st(){}function ut(){}function lt(){}function ht(){}function ft(t,e){var n=[],r=9==this.nodeType&&this.documentElement||this,o=r.prefix,a=r.namespaceURI;if(a&&null==o&&null==(o=r.lookupPrefix(a)))var i=[{namespace:a,prefix:null}];return pt(this,n,t,e,i),n.join("")}function dt(t,e,n){var r=t.prefix||"",o=t.namespaceURI;if(!r&&!o)return!1;if("xml"===r&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var a=n.length;a--;){var i=n[a];if(i.prefix==r)return i.namespace!=o}return!0}function pt(t,e,n,r,o){if(r){if(!(t=r(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case T:o||(o=[]),o.length;var a=t.attributes,i=a.length,c=t.firstChild,s=t.tagName;n="http://www.w3.org/1999/xhtml"===t.namespaceURI||n,e.push("<",s);for(var u=0;u<i;u++)"xmlns"==(l=a.item(u)).prefix?o.push({prefix:l.localName,namespace:l.value}):"xmlns"==l.nodeName&&o.push({prefix:"",namespace:l.value});for(u=0;u<i;u++){var l;if(dt(l=a.item(u),0,o)){var h=l.prefix||"",f=l.namespaceURI,d=h?" xmlns:"+h:" xmlns";e.push(d,'="',f,'"'),o.push({prefix:h,namespace:f})}pt(l,e,n,r,o)}if(dt(t,0,o)&&(h=t.prefix||"",f=t.namespaceURI,d=h?" xmlns:"+h:" xmlns",e.push(d,'="',f,'"'),o.push({prefix:h,namespace:f})),c||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(s)){if(e.push(">"),n&&/^script$/i.test(s))for(;c;)c.data?e.push(c.data):pt(c,e,n,r,o),c=c.nextSibling;else for(;c;)pt(c,e,n,r,o),c=c.nextSibling;e.push("</",s,">")}else e.push("/>");return;case _:case C:for(c=t.firstChild;c;)pt(c,e,n,r,o),c=c.nextSibling;return;case N:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,$),'"');case y:return e.push(t.data.replace(/[<&]/g,$));case E:return e.push("<![CDATA[",t.data,"]]>");case A:return e.push("\x3c!--",t.data,"--\x3e");case I:var p=t.publicId,m=t.systemId;if(e.push("<!DOCTYPE ",t.name),p)e.push(' PUBLIC "',p),m&&"."!=m&&e.push('" "',m),e.push('">');else if(m&&"."!=m)e.push(' SYSTEM "',m,'">');else{var g=t.internalSubset;g&&e.push(" [",g,"]"),e.push(">")}return;case w:return e.push("<?",t.target," ",t.data,"?>");case O:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function mt(t,e,n){t[e]=n}M.INVALID_STATE_ERR=(S[11]="Invalid state",11),M.SYNTAX_ERR=(S[12]="Syntax error",12),M.INVALID_MODIFICATION_ERR=(S[13]="Invalid modification",13),M.NAMESPACE_ERR=(S[14]="Invalid namespace",14),M.INVALID_ACCESS_ERR=(S[15]="Invalid access",15),P.prototype=Error.prototype,g(M,P),B.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],r=0;r<this.length;r++)pt(this[r],n,t,e);return n.join("")}},L.prototype.item=function(t){return V(this),this[t]},b(L,B),U.prototype={length:0,item:B.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new P(k);var n=this.getNamedItem(t.nodeName);return q(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e,n=t.ownerElement;if(n&&n!=this._ownerElement)throw new P(k);return e=this.getNamedItemNS(t.namespaceURI,t.localName),q(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return G(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return G(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var r=this[n];if(r.localName==e&&r.namespaceURI==t)return r}return null}},X.prototype={hasFeature:function(t,e){var n=this._features[t.toLowerCase()];return!(!n||e&&!(e in n))},createDocument:function(t,e,n){var r=new Z;if(r.implementation=this,r.childNodes=new B,r.doctype=n,n&&r.appendChild(n),e){var o=r.createElementNS(t,e);r.appendChild(o)}return r},createDocumentType:function(t,e,n){var r=new at;return r.name=t,r.nodeName=t,r.publicId=e,r.systemId=n,r}},Y.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Q(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return J(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,n,r){var o=new n.constructor;for(var a in n){var i=n[a];"object"!=typeof i&&i!=o[a]&&(o[a]=i)}switch(n.childNodes&&(o.childNodes=new B),o.ownerDocument=e,o.nodeType){case T:var c=n.attributes,s=o.attributes=new U,u=c.length;s._ownerElement=o;for(var l=0;l<u;l++)o.setAttributeNode(t(e,c.item(l),!0));break;case N:r=!0}if(r)for(var h=n.firstChild;h;)o.appendChild(t(e,h,r)),h=h.nextSibling;return o}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==y&&t.nodeType==y?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n)for(var r in n)if(n[r]==t)return r;e=e.nodeType==N?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==N?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},g(v,Y),g(v,Y.prototype),Z.prototype={nodeName:"#document",nodeType:_,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==C){for(var n=t.firstChild;n;){var r=n.nextSibling;this.insertBefore(n,e),n=r}return t}return null==this.documentElement&&t.nodeType==T&&(this.documentElement=t),Q(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),J(this,t)},importNode:function(t,e){return function t(e,n,r){var o;switch(n.nodeType){case T:(o=n.cloneNode(!1)).ownerDocument=e;case C:break;case N:r=!0}if(o||(o=n.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,r)for(var a=n.firstChild;a;)o.appendChild(t(e,a,r)),a=a.nextSibling;return o}(this,t,e)},getElementById:function(t){var e=null;return H(this.documentElement,(function(n){if(n.nodeType==T&&n.getAttribute("id")==t)return e=n,!0})),e},getElementsByClassName:function(t){const e=new RegExp(`(^|\\s)${t}(\\s|$)`);return new L(this,t=>{var n=[];return H(t.documentElement,r=>{r!==t&&r.nodeType==T&&e.test(r.getAttribute("class"))&&n.push(r)}),n})},createElement:function(t){var e=new K;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new B,(e.attributes=new U)._ownerElement=e,e},createDocumentFragment:function(){var t=new ut;return t.ownerDocument=this,t.childNodes=new B,t},createTextNode:function(t){var e=new nt;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new rt;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new ot;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new lt;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new tt;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new st;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new K,r=e.split(":"),o=n.attributes=new U;return n.childNodes=new B,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,o._ownerElement=n,n},createAttributeNS:function(t,e){var n=new tt,r=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,2==r.length?(n.prefix=r[0],n.localName=r[1]):n.localName=e,n}},b(Z,Y),K.prototype={nodeType:T,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===C?this.insertBefore(t,null):function(t,e){var n=e.parentNode;if(n){var r=t.lastChild;n.removeChild(e),r=t.lastChild}return r=t.lastChild,e.parentNode=t,e.previousSibling=r,e.nextSibling=null,r?r.nextSibling=e:t.firstChild=e,t.lastChild=e,W(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var r=this.ownerDocument.createAttributeNS(t,e);r.value=r.nodeValue=""+n,this.setAttributeNode(r)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new L(this,(function(e){var n=[];return H(e,(function(r){r===e||r.nodeType!=T||"*"!==t&&r.tagName!=t||n.push(r)})),n}))},getElementsByTagNameNS:function(t,e){return new L(this,(function(n){var r=[];return H(n,(function(o){o===n||o.nodeType!==T||"*"!==t&&o.namespaceURI!==t||"*"!==e&&o.localName!=e||r.push(o)})),r}))}},Z.prototype.getElementsByTagName=K.prototype.getElementsByTagName,Z.prototype.getElementsByTagNameNS=K.prototype.getElementsByTagNameNS,b(K,Y),tt.prototype.nodeType=N,b(tt,Y),et.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(S[x])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){n=this.data.substring(0,t)+n+this.data.substring(t+e),this.nodeValue=this.data=n,this.length=n.length}},b(et,Y),nt.prototype={nodeName:"#text",nodeType:y,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var r=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},b(nt,et),rt.prototype={nodeName:"#comment",nodeType:A},b(rt,et),ot.prototype={nodeName:"#cdata-section",nodeType:E},b(ot,et),at.prototype.nodeType=I,b(at,Y),it.prototype.nodeType=j,b(it,Y),ct.prototype.nodeType=R,b(ct,Y),st.prototype.nodeType=O,b(st,Y),ut.prototype.nodeName="#document-fragment",ut.prototype.nodeType=C,b(ut,Y),lt.prototype.nodeType=w,b(lt,Y),ht.prototype.serializeToString=function(t,e,n){return ft.call(t,e,n)},Y.prototype.toString=ft;try{Object.defineProperty&&(Object.defineProperty(L.prototype,"length",{get:function(){return V(this),this.$$length}}),Object.defineProperty(Y.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case T:case C:var n=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&n.push(t(e)),e=e.nextSibling;return n.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case T:case C:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),mt=function(t,e,n){t["$$"+e]=n})}catch(ve){}var gt={};function bt(t){this.options=t||{locator:{}}}function vt(){this.cdata=!1}function Tt(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function Nt(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function yt(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function Et(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}bt.prototype.parseFromString=function(e,n){var r=this.options,o=new Ot,a=r.domBuilder||new vt,i=r.errorHandler,c=r.locator,s=r.xmlns||{},u=/\/x?html?$/.test(n),l=u?t.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&a.setDocumentLocator(c),o.errorHandler=function(t,e,n){if(!t){if(e instanceof vt)return e;t=e}var r={},o=t instanceof Function;function a(e){var a=t[e];!a&&o&&(a=2==t.length?function(n){t(e,n)}:t),r[e]=a&&function(t){a("[xmldom "+e+"]\t"+t+Nt(n))}||function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),r}(i,a,c),o.domBuilder=r.domBuilder||a,u&&(s[""]="http://www.w3.org/1999/xhtml"),s.xml=s.xml||"http://www.w3.org/XML/1998/namespace",e?o.parse(e,s,l):o.errorHandler.error("invalid doc source"),a.doc},vt.prototype={startDocument:function(){this.doc=(new Rt).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,r){var o=this.doc,a=o.createElementNS(t,n||e),i=r.length;Et(this,a),this.currentElement=a,this.locator&&Tt(this.locator,a);for(var c=0;c<i;c++){t=r.getURI(c);var s=r.getValue(c),u=(n=r.getQName(c),o.createAttributeNS(t,n));this.locator&&Tt(r.getLocator(c),u),u.value=u.nodeValue=s,a.setAttributeNode(u)}},endElement:function(t,e,n){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&Tt(this.locator,n),Et(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=yt.apply(this,arguments)){if(this.cdata)var r=this.doc.createCDATASection(t);else r=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(t)&&this.doc.appendChild(r),this.locator&&Tt(this.locator,r)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=yt.apply(this,arguments);var r=this.doc.createComment(t);this.locator&&Tt(this.locator,r),Et(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var r=this.doc.implementation;if(r&&r.createDocumentType){var o=r.createDocumentType(t,e,n);this.locator&&Tt(this.locator,o),Et(this,o)}},warning:function(t){console.warn("[xmldom warning]\t"+t,Nt(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,Nt(this.locator))},fatalError:function(t){throw console.error("[xmldom fatalError]\t"+t,Nt(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){vt.prototype[t]=function(){return null}}));var Ot=e.XMLReader,Rt=m.DOMImplementation;gt.DOMParser=bt;var wt=function(){"use strict";var t=/\s*/g,e=/^\s*|\s*$/g,n=/\s+/;function r(t){if(!t||!t.length)return 0;for(var e=0,n=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e)|0;return n}function o(t,e){return t.getElementsByTagName(e)}function a(t,e){var n=o(t,e);return n.length?n[0]:null}function i(t){for(var e=0,n=[];e<t.length;e++)n[e]=parseFloat(t[e]);return n}function c(t){var e;return t&&(e=t).normalize&&e.normalize(),t&&t.firstChild&&t.firstChild.nodeValue||""}function s(e){return i(e.replace(t,"").split(","))}function u(t){for(var r=t.replace(e,"").split(n),o=[],a=0;a<r.length;a++)o.push(s(r[a]));return o}function l(t){if(void 0!==t.xml)return t.xml;if(t.tagName){for(var e=t.tagName,n=0;n<t.attributes.length;n++)e+=t.attributes[n].name+t.attributes[n].value;for(var r=0;r<t.childNodes.length;r++)e+=l(t.childNodes[r]);return e}}return{kml:function(t){for(var e,n={type:"FeatureCollection",features:[]},h={},f=["Polygon","LineString","Point","Track"],d=o(t,"Placemark"),p=o(t,"Style"),m=0;m<p.length;m++)h["#"+(e=p[m],"id",e.getAttribute("id"))]=r(l(p[m])).toString(16);for(var g=0;g<d.length;g++)n.features=n.features.concat(T(d[g]));function b(t){var e,n;return"#"===(t=t||"").substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(n=parseInt(t.substr(0,2),16)/255,e=t.substr(2)),[e,isNaN(n)?void 0:n]}function v(t){for(var e=o(t,"coord"),n=[],r=0;r<e.length;r++)n.push(i(c(e[r]).split(" ")));return n}function T(t){var e,n=function t(e){var n,r,i,l,h,d=[];if(a(e,"MultiGeometry"))return t(a(e,"MultiGeometry"));if(a(e,"MultiTrack"))return t(a(e,"MultiTrack"));for(i=0;i<f.length;i++)if(r=o(e,f[i]))for(l=0;l<r.length;l++)if(n=r[l],"Point"==f[i])d.push({type:"Point",coordinates:s(c(a(n,"coordinates")))});else if("LineString"==f[i])d.push({type:"LineString",coordinates:u(c(a(n,"coordinates")))});else if("Polygon"==f[i]){var p=o(n,"LinearRing"),m=[];for(h=0;h<p.length;h++)m.push(u(c(a(p[h],"coordinates"))));d.push({type:"Polygon",coordinates:m})}else"Track"==f[i]&&d.push({type:"LineString",coordinates:v(n)});return d}(t),r={},i=c(a(t,"name")),l=c(a(t,"address")),d=c(a(t,"styleUrl")),p=c(a(t,"description")),m=a(t,"TimeSpan"),g=a(t,"ExtendedData"),T=a(t,"LineStyle"),N=a(t,"PolyStyle");if(!n.length)return[];if(i&&(r.name=i),l&&(r.address=l),d&&h[d]&&(r.styleUrl=d,r.styleHash=h[d]),p&&(r.description=p),m){var y=c(a(m,"begin")),E=c(a(m,"end"));r.timespan={begin:y,end:E}}if(T){var O=b(c(a(T,"color"))),R=O[0],w=O[1],A=parseFloat(c(a(T,"width")));R&&(r.stroke=R),isNaN(w)||(r["stroke-opacity"]=w),isNaN(A)||(r["stroke-width"]=A)}if(N){var _=b(c(a(N,"color"))),I=_[0],C=_[1],j=c(a(N,"fill")),M=c(a(N,"outline"));I&&(r.fill=I),isNaN(C)||(r["fill-opacity"]=C),j&&(r["fill-opacity"]="1"===j?1:0),M&&(r["stroke-opacity"]="1"===M?1:0)}if(g){var S=o(g,"Data"),x=o(g,"SimpleData");for(e=0;e<S.length;e++)r[S[e].getAttribute("name")]=c(a(S[e],"value"));for(e=0;e<x.length;e++)r[x[e].getAttribute("name")]=c(x[e])}return[{type:"Feature",geometry:1===n.length?n[0]:{type:"GeometryCollection",geometries:n},properties:r}]}return n}}}(),At={};Object.defineProperty(At,"__esModule",{value:!0}),At.string=At.boolean=At.number=At.object=At.example=At.optional=At.required=At.command=void 0,At.command="\xa76",At.required="\xa7a",At.optional="\xa7b";var _t="".concat("\xa77").concat("\xa7o");At.example=_t,At.object="\xa7f",At.number="\xa7c",At.boolean="\xa7d",At.string="\xa7e";var It={};Object.defineProperty(It,"__esModule",{value:!0}),It.draw=void 0;var Ct="".concat(At.command,"/cs draw ").concat(At.required,"<file> ").concat(At.optional,"[block] [options] \n").concat(At.example,"/cs draw rails1 iron_block\n").concat(At.example,'/cs draw file3.kml stone {"offset":3,"onGround":false}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"block": ').concat(At.string,'"gold_block"').concat(At.object,",\n  ").concat(At.object,'"height": ').concat(At.number,"1").concat(At.object,",\n  ").concat(At.object,'"offset": ').concat(At.number,"0").concat(At.object,",\n  ").concat(At.object,'"onGround": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreBuildings": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreVegetation": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n  ").concat(At.object,'"allowedBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"]\n  ").concat(At.object,"}\n");It.draw=Ct;"".concat(At.command,"/cs gis_fr ").concat(At.optional,"[options] \n").concat(At.example,"/cs gis_fr\n").concat(At.example,'/cs gis_fr {"smooth":false,"ignoreWater":true}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"smooth": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreWater": ').concat(At.boolean,"false").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n").concat(At.object,"}\n"),"".concat(At.command,"/cs gis_jp ").concat(At.optional,"[options] \n").concat(At.example,"/cs gis_jp\n").concat(At.example,'/cs gis_jp {"smooth":false,"ignoreWater":true}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"smooth": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreWater": ').concat(At.boolean,"false").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n").concat(At.object,"}\n"),"".concat(At.command,"/cs hedges ").concat(At.optional,"[options] \n").concat(At.example,"/cs hedges\n").concat(At.example,'/cs hedges {"block":"stone","height":5}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"block": ').concat(At.string,'"leaves:4"').concat(At.object,",\n  ").concat(At.object,'"height": ').concat(At.number,"2").concat(At.object,",\n  ").concat(At.object,'"offset": ').concat(At.number,"1").concat(At.object,",\n  ").concat(At.object,'"onGround": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreBuildings": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreVegetation": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n  ").concat(At.object,'"allowedBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"]\n").concat(At.object,"}\n"),"".concat(At.command,"/cs hedgesnear ").concat(At.required,"<radius> ").concat(At.optional,"[options] \n").concat(At.example,"/cs hedgesnear 7\n").concat(At.example,'/cs hedgesnear 50 {"block":"stone","height":5}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"block": ').concat(At.string,'"leaves:4"').concat(At.object,",\n  ").concat(At.object,'"height": ').concat(At.number,"2").concat(At.object,",\n  ").concat(At.object,'"offset": ').concat(At.number,"1").concat(At.object,",\n  ").concat(At.object,'"onGround": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreBuildings": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreVegetation": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n  ").concat(At.object,'"allowedBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"]\n").concat(At.object,"}\n"),"".concat(At.command,"/cs osm ").concat(At.required,"<query> ").concat(At.optional,"[options] \n  ").concat(At.example,'/cs osm way[highway~"^.*$"]\n  ').concat(At.example,'/cs osm way[railway~"^.*$"] {"block":"stone","offset":5}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"block": ').concat(At.string,'"diamond_block"').concat(At.object,",\n  ").concat(At.object,'"offset": ').concat(At.number,"0").concat(At.object,",\n  ").concat(At.object,'"height": ').concat(At.number,"1").concat(At.object,",\n  ").concat(At.object,'"onGround": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreBuildings": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreVegetation": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n  ").concat(At.object,'"allowedBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"]\n").concat(At.object,"}\n"),"".concat(At.command,"/cs osmnear ").concat(At.required,"<query> <radius> ").concat(At.optional,"[options] \n  ").concat(At.example,'/cs osmnear way[highway~"^.*$"] 7\n  ').concat(At.example,'/cs osmnear way[railway~"^.*$"] 50 {"block":"stone","offset":5}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"block": ').concat(At.string,'"diamond_block"').concat(At.object,",\n  ").concat(At.object,'"offset": ').concat(At.number,"0").concat(At.object,",\n  ").concat(At.object,'"height": ').concat(At.number,"1").concat(At.object,",\n  ").concat(At.object,'"regex": ').concat(At.string,'"^.*$"').concat(At.object,",\n  ").concat(At.object,'"onGround": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreBuildings": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreVegetation": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n  ").concat(At.object,'"allowedBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"]\n").concat(At.object,"}\n"),"".concat(At.command,"/cs rails ").concat(At.optional,"[options] \n  ").concat(At.example,"/cs rails\n  ").concat(At.example,'/cs rails {"block":"stone","offset":5}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"block": ').concat(At.string,'"iron_block"').concat(At.object,",\n  ").concat(At.object,'"offset": ').concat(At.number,"0").concat(At.object,",\n  ").concat(At.object,'"height": ').concat(At.number,"1").concat(At.object,",\n  ").concat(At.object,'"regex": ').concat(At.string,'"^.*$"').concat(At.object,",\n  ").concat(At.object,'"onGround": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreBuildings": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreVegetation": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n  ").concat(At.object,'"allowedBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"]\n").concat(At.object,"}\n"),"".concat(At.command,"/cs railsnear ").concat(At.required,"<radius> ").concat(At.required,"[options] \n  ").concat(At.example,"/cs railsnear 7\n  ").concat(At.example,'/cs railsnear 50 {"block":"stone","offset":5}\nDefault options: ').concat(At.object,"{\n  ").concat(At.object,'"block": ').concat(At.string,'"iron_block"').concat(At.object,",\n  ").concat(At.object,'"offset": ').concat(At.number,"0").concat(At.object,",\n  ").concat(At.object,'"height": ').concat(At.number,"1").concat(At.object,",\n  ").concat(At.object,'"regex": ').concat(At.string,'"^.*$"').concat(At.object,",\n  ").concat(At.object,'"onGround": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreBuildings": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoreVegetation": ').concat(At.boolean,"true").concat(At.object,",\n  ").concat(At.object,'"ignoredBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"],\n  ").concat(At.object,'"allowedBlocks": [').concat(At.string,'"see documentation"').concat(At.object,"]\n").concat(At.object,"}\n"),"".concat(At.command,"/cs tpll ").concat(At.required,"<latitude> <longitude> ").concat(At.required,"[altitude]\n  ").concat(At.example,"/cs tpll 47.58523 6.89725\n  ").concat(At.example,"/cs tpll 47.58523, 6.89725 370\n  ").concat(At.example,"/cs tpll 47\xb035'6.32\"N 6\xb053'50.06\"E\n  ").concat(At.example,"/cs tpll 47\xb035'6.32\"N, 6\xb053'50.06\"E 370");var jt={};function Mt(t,e,n){return(Mt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kt(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(n):o.value}})(t,e,n||t)}function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");var n,r;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&(n=t,r=e,(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(n,r))}function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(ve){return!1}}();return function(){var n,r,o,a=kt(t);if(e){var i=kt(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return r=this,!(o=n)||"object"!==St(o)&&"function"!=typeof o?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r):o}}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e,n){return e&&Bt(t.prototype,e),n&&Bt(t,n),t}Object.defineProperty(jt,"__esModule",{value:!0}),jt.default=function(){var t=new Yt,e=(new Vt).orientProjection(t);return new qt(e,7318261.522857145,7318261.522857145)},importPackage(Packages.java.io),importPackage(Packages.java.awt);var Vt=function(){function t(){Pt(this,t),this.Orientation={none:1,upright:2,swapped:3},this.EARTH_CIRCUMFERENCE=40075017,this.EARTH_POLAR_CIRCUMFERENCE=40008e3}return Lt(t,[{key:"orientProjection",value:function(t){return t.upright()?t:new Ft(t)}},{key:"toGeo",value:function(t,e){return[t,e]}},{key:"fromGeo",value:function(t,e){return[t,e]}},{key:"upright",value:function(){return this.fromGeo(0,90)[1]<=this.fromGeo(0,-90)[1]}},{key:"vector",value:function(t,e,n,r){var o=this.toGeo(t,e),a=this.fromGeo(o[0]+360*r/(Math.cos(o[1]*Math.PI/180)*this.EARTH_CIRCUMFERENCE),o[1]+360*n/this.EARTH_POLAR_CIRCUMFERENCE);return[a[0]-t,a[1]-e]}}]),t}(),Ut=function(t){xt(n,Vt);var e=Dt(n);function n(t){var r;return Pt(this,n),(r=e.call(this)).input=t,r}return Lt(n,[{key:"upright",value:function(){return this.input.upright()}},{key:"bounds",value:function(){return this.input.bounds()}},{key:"metersPerUnit",value:function(){return this.input.metersPerUnit()}}]),n}(),Ft=function(t){xt(n,Ut);var e=Dt(n);function n(){return Pt(this,n),e.apply(this,arguments)}return Lt(n,[{key:"toGeo",value:function(t,e){return this.input.toGeo(t,-e)}},{key:"fromGeo",value:function(t,e){var n=this.input.fromGeo(t,e);return n[1]=-n[1],n}},{key:"upright",value:function(){return!this.input.upright()}},{key:"bounds",value:function(){var t=this.input.bounds();return new[t[0],-t[3],t[2],-t[1]]}}]),n}(),qt=function(t){xt(n,Ut);var e=Dt(n);function n(t,r,o){var a;return Pt(this,n),(a=e.call(this,t)).scaleX=r,a.scaleY=o||r,a}return Lt(n,[{key:"toGeo",value:function(t,e){return this.input.toGeo(t/this.scaleX,e/this.scaleY)}},{key:"fromGeo",value:function(t,e){var n=this.input.fromGeo(t,e);return n[0]*=this.scaleX,n[1]*=this.scaleY,n}},{key:"upright",value:function(){return!!(this.scaleY<0^this.input.upright())}},{key:"bounds",value:function(){var t=this.input.bounds();return t[0]*=this.scaleX,t[1]*=this.scaleY,t[2]*=this.scaleX,t[3]*=this.scaleY,t}},{key:"metersPerUnit",value:function(){return this.input.metersPerUnit()/Math.sqrt((this.scaleX*this.scaleX+this.scaleY*this.scaleY)/2)}}]),n}(),Gt=function(t){xt(n,Vt);var e=Dt(n);function n(){var t;Pt(this,n),(t=e.call(this)).ARC=2*Math.asin(Math.sqrt(5-Math.sqrt(5))/Math.sqrt(10)),t.TO_RADIANS=Math.PI/180,t.ROOT3=Math.sqrt(3),t.newton=5,t.VERT=[10.536199,64.7,-5.24539,2.300882,58.157706,10.447378,122.3,39.1,-143.47849,50.103201,-67.13233,23.717925,36.52151,-50.1032,112.867673,-23.71793,174.75461,-2.300882,-121.84229,-10.44735,-57.7,-39.1,-169.4638,-64.7],t.ISO=[2,1,6,1,0,2,0,1,5,1,5,10,1,6,10,7,2,6,2,3,7,3,0,2,0,3,4,4,0,5,5,4,9,9,5,10,10,9,11,11,6,10,6,7,11,8,3,7,8,3,4,8,4,9,9,8,11,7,8,11,11,6,7,3,7,8],t.CENTER_MAP=[-3,7,-2,5,-1,7,2,5,4,5,-4,1,-3,-1,-2,1,-1,-1,0,1,1,-1,2,1,3,-1,4,1,5,-1,-3,-5,-1,-5,1,-5,2,-7,-4,-7,-5,-5,-2,-7],t.FLIP_TRIANGLE=[1,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,0,1,0],t.CENTROID=new Array(66),t.ROTATION_MATRIX=new Array(198),t.INVERSE_ROTATION_MATRIX=new Array(198);for(var r=0;r<22;r++)t.CENTER_MAP[2*r]*=.5*t.ARC,t.CENTER_MAP[2*r+1]*=t.ARC*t.ROOT3/12;for(var o=0;o<12;o++)t.VERT[2*o+1]=90-t.VERT[2*o+1],t.VERT[2*o]*=t.TO_RADIANS,t.VERT[2*o+1]*=t.TO_RADIANS;for(var a=0;a<22;a++){var i=t.cart(t.VERT[2*t.ISO[3*a]],t.VERT[2*t.ISO[3*a]+1]),c=t.cart(t.VERT[2*t.ISO[3*a+1]],t.VERT[2*t.ISO[3*a+1]+1]),s=t.cart(t.VERT[2*t.ISO[3*a+2]],t.VERT[2*t.ISO[3*a+2]+1]),u=i[0]+c[0]+s[0],l=i[1]+c[1]+s[1],h=i[2]+c[2]+s[2],f=Math.sqrt(u*u+l*l+h*h);t.CENTROID[3*a]=u/f,t.CENTROID[3*a+1]=l/f,t.CENTROID[3*a+2]=h/f;var d=Math.atan2(l,u),p=Math.atan2(Math.sqrt(u*u+l*l),h),m=[t.VERT[2*t.ISO[3*a]],t.VERT[2*t.ISO[3*a]+1]];m=t.yRot(m[0]-d,m[1],-p),t.produceZYZRotationMatrix(t.ROTATION_MATRIX,9*a,-d,-p,Math.PI/2-m[0]),t.produceZYZRotationMatrix(t.INVERSE_ROTATION_MATRIX,9*a,m[0]-Math.PI/2,p,d)}return t.FACE_ON_GRID=[-1,-1,0,1,2,-1,-1,3,-1,4,-1,-1,5,6,7,8,9,10,11,12,13,14,20,19,15,21,16,-1,17,18,-1,-1,-1],t.Z=Math.sqrt(5+2*Math.sqrt(5))/Math.sqrt(15),t.EL=Math.sqrt(8)/Math.sqrt(5+Math.sqrt(5)),t.EL6=t.EL/6,t.DVE=Math.sqrt(3+Math.sqrt(5))/Math.sqrt(5+Math.sqrt(5)),t.R=-3*t.EL6/t.DVE,t.OUT_OF_BOUNDS=[NaN,NaN],t}return Lt(n,[{key:"produceZYZRotationMatrix",value:function(t,e,n,r,o){var a=Math.sin(n),i=Math.cos(n),c=Math.sin(r),s=Math.cos(r),u=Math.sin(o),l=Math.cos(o);t[e+0]=i*s*l-u*a,t[e+1]=-a*s*l-u*i,t[e+2]=l*c,t[e+3]=u*s*i+l*a,t[e+4]=l*i-u*s*a,t[e+5]=u*c,t[e+6]=-c*i,t[e+7]=c*a,t[e+8]=s}},{key:"cart",value:function(t,e){var n=Math.sin(e);return[n*Math.cos(t),n*Math.sin(t),Math.cos(e)]}},{key:"findTriangle",value:function(t,e,n){for(var r=Number.MAX_VALUE,o=0,a=0;a<20;a++){var i=this.CENTROID[3*a]-t,c=this.CENTROID[3*a+1]-e,s=this.CENTROID[3*a+2]-n,u=i*i+c*c+s*s;if(u<r){if(u<.1)return a;o=a,r=u}}return o}},{key:"findMapTriangle",value:function(t,e){for(var n=Number.MAX_VALUE,r=0,o=0;o<20;o++){var a=this.CENTER_MAP[2*o]-t,i=this.CENTER_MAP[2*o+1]-e,c=a*a+i*i;c<n&&(r=o,n=c)}return r}},{key:"findTriangleGrid",value:function(t,e){var n,r=t/this.ARC,o=e/(this.ARC*this.ROOT3);if(o>-.25)if(o<.25)n=1;else{if(!(o<=.75))return-1;n=0,o=.5-o}else{if(!(o>=-.75))return-1;n=2,o=-o-.5}var a=r-(o+=.25),i=r+o,c=Math.floor(a),s=2*c+(Math.floor(i)!==c?1:0)+6;return s<0||s>=11?-1:this.FACE_ON_GRID[11*n+s]}},{key:"triangleTransform",value:function(t,e,n){var r=this.Z/n,o=r*t,a=r*e,i=Math.atan((2*a/this.ROOT3-this.EL6)/this.DVE),c=Math.atan((o-a/this.ROOT3-this.EL6)/this.DVE),s=Math.atan((-o-a/this.ROOT3-this.EL6)/this.DVE);return[.5*(c-s),(2*i-c-s)/(2*this.ROOT3)]}},{key:"inverseTriangleTransformNewton",value:function(t,e){for(var n=Math.tan(this.ROOT3*e+t),r=Math.tan(2*t),o=n*n+1,a=r*r+1,i=n,c=r,s=0,u=1,l=1,h=0;h<this.newton;h++)i=((s-=(i+c+s-this.R)/(o*u*u+a*l*l+1))+n)*(u=1/(1-s*n)),c=(s+r)*(l=1/(1-s*r));var f=this.ROOT3*(this.DVE*i+this.EL6)/2,d=(this.DVE*c+f/this.ROOT3+this.EL6)/this.Z,p=f/this.Z,m=1/Math.sqrt(1+d*d+p*p);return[m*d,m*p,m]}},{key:"inverseTriangleTransformCbrt",value:function(t,e){var n=Math.tan(this.ROOT3*e+t),r=Math.tan(2*t),o=r*n,a=-(this.R*r*n+2*r+2*n),i=3+this.R*r+this.R*n-2*r*n,c=-a/(3*o),s=c*c*c+(a*i-3*o*(r+n-this.R))/(6*o*o),u=i/(3*o)-c*c,l=Math.sqrt(-(s*s+u*u*u)),h=Math.sqrt(l*l+s*s),f=Math.atan2(l,s),d=2*Math.cbrt(h)*Math.cos(f/3)+c,p=(d+n)/(1-d*n),m=(d+r)/(1-d*r),g=this.ROOT3*(this.DVE*p+this.EL6)/2,b=(this.DVE*m+g/this.ROOT3+this.EL6)/this.Z,v=g/this.Z,T=1/Math.sqrt(1+b*b+v*v);return[T*b,T*v,T]}},{key:"inverseTriangleTransformCbrtNewton",value:function(t,e){for(var n=Math.tan(this.ROOT3*e+t),r=Math.tan(2*t),o=n+r,a=r*n,i=-(this.R*a+2*r+2*n),c=3+this.R*o-2*a,s=o-this.R,u=3*a,l=2*i,h=-s/c,f=0;f<this.newton;f++){var d=h*h;h-=(a*d*h+i*d+c*h+s)/(u*d+l*h+c)}var p=(h+n)/(1-h*n),m=(h+r)/(1-h*r),g=this.ROOT3*(this.DVE*p+this.EL6)/2,b=(this.DVE*m+g/this.ROOT3+this.EL6)/this.Z,v=g/this.Z,T=1/Math.sqrt(1+b*b+v*v);return[T*b,T*v,T]}},{key:"inverseTriangleTransform",value:function(t,e){return this.inverseTriangleTransformNewton(t,e)}},{key:"yRot",value:function(t,e,n){var r=this.cart(t,e),o=r[0];r[0]=r[2]*Math.sin(n)+o*Math.cos(n),r[2]=r[2]*Math.cos(n)-o*Math.sin(n);var a=Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]);return r[0]/=a,r[1]/=a,r[2]/=a,[Math.atan2(r[1],r[0]),Math.atan2(Math.sqrt(r[0]*r[0]+r[1]*r[1]),r[2])]}},{key:"fromGeo",value:function(t,e){e=90-e,t*=this.TO_RADIANS,e*=this.TO_RADIANS;var n=Math.sin(e),r=Math.cos(t)*n,o=Math.sin(t)*n,a=Math.cos(e),i=this.findTriangle(r,o,a),c=9*i,s=r*this.ROTATION_MATRIX[c+0]+o*this.ROTATION_MATRIX[c+1]+a*this.ROTATION_MATRIX[c+2],u=r*this.ROTATION_MATRIX[c+3]+o*this.ROTATION_MATRIX[c+4]+a*this.ROTATION_MATRIX[c+5],l=r*this.ROTATION_MATRIX[c+6]+o*this.ROTATION_MATRIX[c+7]+a*this.ROTATION_MATRIX[c+8],h=this.triangleTransform(s,u,l);return 0!==this.FLIP_TRIANGLE[i]&&(h[0]=-h[0],h[1]=-h[1]),r=h[0],(15===i&&r>h[1]*this.ROOT3||14===i)&&r>0&&(h[0]=.5*r-.5*this.ROOT3*h[1],h[1]=.5*this.ROOT3*r+.5*h[1],i+=6),h[0]+=this.CENTER_MAP[2*i],h[1]+=this.CENTER_MAP[2*i+1],h}},{key:"toGeo",value:function(t,e){var n=this.findTriangleGrid(t,e);if(-1===n)return this.OUT_OF_BOUNDS;switch(t-=this.CENTER_MAP[2*n],e-=this.CENTER_MAP[2*n+1],n){case 14:if(t>0)return this.OUT_OF_BOUNDS;break;case 20:if(-e*this.ROOT3>t)return this.OUT_OF_BOUNDS;break;case 15:if(t>0&&t>e*this.ROOT3)return this.OUT_OF_BOUNDS;break;case 21:if(t<0||-e*this.ROOT3>t)return this.OUT_OF_BOUNDS}0!==this.FLIP_TRIANGLE[n]&&(t=-t,e=-e);var r=this.inverseTriangleTransform(t,e);t=r[0],e=r[1];var o=r[2],a=9*n,i=t*this.INVERSE_ROTATION_MATRIX[a+0]+e*this.INVERSE_ROTATION_MATRIX[a+1]+o*this.INVERSE_ROTATION_MATRIX[a+2],c=t*this.INVERSE_ROTATION_MATRIX[a+3]+e*this.INVERSE_ROTATION_MATRIX[a+4]+o*this.INVERSE_ROTATION_MATRIX[a+5],s=t*this.INVERSE_ROTATION_MATRIX[a+6]+e*this.INVERSE_ROTATION_MATRIX[a+7]+o*this.INVERSE_ROTATION_MATRIX[a+8];return[Math.atan2(c,i)/this.TO_RADIANS,90-Math.acos(s)/this.TO_RADIANS]}},{key:"bounds",value:function(){return[-3*this.ARC,-.75*this.ARC*this.ROOT3,2.5*this.ARC,.75*this.ARC*this.ROOT3]}},{key:"upright",value:function(){return!1}},{key:"metersPerUnit",value:function(){return Math.sqrt(5101e11/(20*this.ROOT3*this.ARC*this.ARC/4))}}]),n}(),Xt=function(t){xt(n,Gt);var e=Dt(n);function n(){var t;Pt(this,n),(t=e.call(this)).VECTOR_SCALE_FACTOR=.8715371854532509;for(var r=null,o=new Array(257),a=new Array(o.length),i=0;i<o.length;i++)o[i]=[];for(var c=0;c<a.length;c++)a[c]=[];try{if((r=context.getSafeOpenFile("craftscripts/data","conformal","txt")).exists()){for(var s=new BufferedReader(new FileReader(r)),u=0;u<o.length;u++){var l=new Array(o.length-u),h=new Array(o.length-u);o[u]=l,a[u]=h}for(var f=0;f<o.length;f++)for(var d=0;d<o.length-f;d++){var p=s.readLine(),m=(p=p.substring(1,p.length()-3)).split(", ");o[d][f]=Number.parseFloat(m[0])*t.VECTOR_SCALE_FACTOR,a[d][f]=Number.parseFloat(m[1])*t.VECTOR_SCALE_FACTOR}}else player.printError("Conformal.txt doesn't exist.");s.close()}catch(ve){player.printError("Can't load conformal: "+ve)}return t.inverse=new $t(o,a),t}return Lt(n,[{key:"triangleTransform",value:function(t,e,r){var o=Mt(kt(n.prototype),"triangleTransform",this).call(this,t,e,r);return t=o[0],e=o[1],o[0]/=this.ARC,o[1]/=this.ARC,o[0]+=.5,o[1]+=this.ROOT3/6,(o=this.inverse.applyNewtonsMethod(t,e,o[0],o[1],5))[0]-=.5,o[1]-=this.ROOT3/6,o[0]*=this.ARC,o[1]*=this.ARC,o}},{key:"inverseTriangleTransform",value:function(t,e){t/=this.ARC,e/=this.ARC,t+=.5,e+=this.ROOT3/6;var r=this.inverse.getInterpolatedVector(t,e);return Mt(kt(n.prototype),"inverseTriangleTransform",this).call(this,r[0],r[1])}},{key:"metersPerUnit",value:function(){return 40075017/(2*Math.PI)/this.VECTOR_SCALE_FACTOR}}]),n}(),Yt=function(t){xt(n,Xt);var e=Dt(n);function n(){var t;return Pt(this,n),(t=e.call(this)).THETA=-150*t.TO_RADIANS,t.SIN_THETA=Math.sin(t.THETA),t.COS_THETA=Math.cos(t.THETA),t.BERING_X=-.3420420960118339,t.BERING_Y=-.322211064085279,t.ARCTIC_Y=-.2,t.ARCTIC_M=(t.ARCTIC_Y-t.ROOT3*t.ARC/4)/(t.BERING_X- -.5*t.ARC),t.ARCTIC_B=t.ARCTIC_Y-t.ARCTIC_M*t.BERING_X,t.ALEUTIAN_Y=-.5000446805492526,t.ALEUTIAN_XL=-.5149231279757507,t.ALEUTIAN_XR=-.45,t.ALEUTIAN_M=(t.BERING_Y-t.ALEUTIAN_Y)/(t.BERING_X-t.ALEUTIAN_XR),t.ALEUTIAN_B=t.BERING_Y-t.ALEUTIAN_M*t.BERING_X,t}return Lt(n,[{key:"fromGeo",value:function(t,e){var r=Mt(kt(n.prototype),"fromGeo",this).call(this,t,e),o=r[0],a=r[1],i=this.isEurasianPart(o,a);if(a-=.75*this.ARC*this.ROOT3,i){var c=o+=this.ARC;o=this.COS_THETA*o-this.SIN_THETA*a,a=this.SIN_THETA*c+this.COS_THETA*a}else o-=this.ARC;return r[0]=a,r[1]=-o,r}},{key:"toGeo",value:function(t,e){var r;r=e<0?t>0:e>this.ARC/2?t>-this.ROOT3*this.ARC/2:e*-this.ROOT3<t;var o=t;return t=-e,e=o,r?(o=t,t=this.COS_THETA*t+this.SIN_THETA*e,e=this.COS_THETA*e-this.SIN_THETA*o,t-=this.ARC):t+=this.ARC,e+=.75*this.ARC*this.ROOT3,r!==this.isEurasianPart(t,e)?this.OUT_OF_BOUNDS:Mt(kt(n.prototype),"toGeo",this).call(this,t,e)}},{key:"isEurasianPart",value:function(t,e){return!(t>0)&&(t<-.5*this.ARC||(e>this.ROOT3*this.ARC/4?t<0:e<this.ALEUTIAN_Y?e<this.ALEUTIAN_Y+this.ALEUTIAN_XL-t:e>this.BERING_Y?e<this.ARCTIC_Y?t<this.BERING_X:e<this.ARCTIC_M*t+this.ARCTIC_B:e>this.ALEUTIAN_M*t+this.ALEUTIAN_B))}},{key:"bounds",value:function(){return[-1.5*this.ARC*this.ROOT3,-1.5*this.ARC,3*this.ARC,this.ROOT3*this.ARC]}}]),n}(),$t=function(){function t(e,n){Pt(this,t),this.ROOT3=Math.sqrt(3),this.sideLength=e.length-1,this.VECTOR_X=e,this.VECTOR_Y=n}return Lt(t,[{key:"getInterpolatedVector",value:function(t,e){t*=this.sideLength;var n,r,o,a,i,c,s,u,l=2*(e*=this.sideLength)/this.ROOT3,h=t-.5*l,f=Math.trunc(h),d=Math.trunc(l);f<0?f=0:f>=this.sideLength&&(f=this.sideLength-1),d<0?d=0:d>=this.sideLength-f&&(d=this.sideLength-f-1);var p=1;e<-this.ROOT3*(t-f-d-1)||d===this.sideLength-f-1?(n=this.VECTOR_X[f][d],r=this.VECTOR_Y[f][d],o=this.VECTOR_X[f][d+1],a=this.VECTOR_Y[f][d+1],i=this.VECTOR_X[f+1][d],c=this.VECTOR_Y[f+1][d],s=.5*this.ROOT3*d,u=f+1+.5*d):(n=this.VECTOR_X[f][d+1],r=this.VECTOR_Y[f][d+1],o=this.VECTOR_X[f+1][d],a=this.VECTOR_Y[f+1][d],i=this.VECTOR_X[f+1][d+1],c=this.VECTOR_Y[f+1][d+1],p=-1,e=-e,s=-.5*this.ROOT3*(d+1),u=f+1+.5*(d+1));var m=-(e-s)/this.ROOT3-(t-u),g=2*(e-s)/this.ROOT3,b=1-m-g;return[n*m+o*g+i*b,r*m+a*g+c*b,(i-n)*this.sideLength,this.sideLength*p*(2*o-n-i)/this.ROOT3,(c-r)*this.sideLength,this.sideLength*p*(2*a-r-c)/this.ROOT3]}},{key:"applyNewtonsMethod",value:function(t,e,n,r,o){for(var a=0;a<o;a++){var i=this.getInterpolatedVector(n,r),c=i[0]-t,s=i[1]-e,u=i[2],l=i[3],h=i[4],f=i[5],d=1/(u*f-l*h);n-=d*(f*c-l*s),r-=d*(-h*c+u*s)}return[n,r]}}]),t}(),Ht={};Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.default=function(t){return function(t){for(var e=(0,zt.default)(),n=[],r=0;r<t.length;r++)for(var o=t[r],a=0;a<o.length-1;a++){var i=Jt(e.fromGeo.apply(e,Wt(o[a])),2),c=i[0],s=i[1],u=Jt(e.fromGeo.apply(e,Wt(o[a+1])),2),l=u[0],h=u[1];n.push([c,s,l,h])}return player.print("\xa77".concat(n.length," lines to draw")),n}(function(t){if("FeatureCollection"!==t.type)throw te;if(!Array.isArray(t.features))throw te;for(var e=[],n=0;n<t.features.length;n++)if("Polygon"===t.features[n].geometry.type)for(var r=t.features[n].geometry.coordinates,o=0;o<r.length;o++){var a=r[o];e.push(a)}else if("LineString"===t.features[n].geometry.type){var i=t.features[n].geometry.coordinates;e.push(i)}return e}(t))};var Zt,zt=(Zt=jt)&&Zt.__esModule?Zt:{default:Zt};function Wt(t){return function(t){if(Array.isArray(t))return Kt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Qt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,e)||Qt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(t,e){if(t){if("string"==typeof t)return Kt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kt(t,e):void 0}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var te=new Error("Incorrect data format"),ee={};function ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return re(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?re(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Object.defineProperty(ee,"__esModule",{value:!0}),ee.draw=function(t,e){for(var n=player.getLocation().y,r=0;r<t.length;r++){var o=ne(t[r],4);ce(o[0],n,o[1],o[2],n,o[3],e)}},ee.findGround=function(t){if(t.onGround){var e=context.remember();return t.ignoreVegetation||(t.ignoredBlocks=[context.getBlock("air").id]),function(n){for(;!t.ignoredBlocks.includes(e.getBlock(n.add(oe)).id);)n=n.add(oe);for(;t.ignoredBlocks.includes(e.getBlock(n).id);)n=n.add(ae);return n}}return function(t){return t}},ee.ignoreBuildings=function(t){if(t.ignoreBuildings){var e=context.remember();return function(n){return t.allowedBlocks.includes(e.getBlock(n).id)}}return function(t){return!0}},ee.setOffset=function(t){if(t.offset){var e=oe.multiply(t.offset);return function(t){return t.add(e)}}return function(t){return t}},ee.setWall=function(t){var e=context.remember(),n=context.getBlock(t.block);if(t.height){var r=Number.parseInt(t.height);return function(t){for(var o=0;o<r;o++)e.setBlock(t,n),t=t.add(oe),ie++}}return function(t){e.setBlock(t,n),ie++}},ee.printBlocks=function(){player.print("Operation completed (".concat(ie," blocks affected)."))},importClass(Packages.com.sk89q.worldedit.Vector);var oe=Vector.UNIT_Y,ae=Vector.UNIT_Y.multiply(-1),ie=0;function ce(t,e,n,r,o,a,i){for(var c=r-t,s=o-e,u=a-n,l=Math.max(Math.abs(c),Math.abs(s),Math.abs(u)),h=c/l,f=s/l,d=u/l,p=Math.max(Math.abs(h),Math.abs(f),Math.abs(d)),m=0;m<l;m+=p)i(new Vector(t+h*m|0,e+f*m|0,n+d*m|0))}var se={};Object.defineProperty(se,"__esModule",{value:!0}),se.allowedBlocks=se.ignoredBlocks=void 0,se.ignoredBlocks=["air","tallgrass","sapling","log","log2","leaves","leaves2","deadbush","red_flower","yellow_flower","red_mushroom","brown_mushroom","vine","waterlily","cactus","reeds","pumpkin","melon_block","snow_layer","double_plant"],se.allowedBlocks=["air","grass","dirt","stone","sand","grass_path","concrete","gravel","water","lava"];var ue={};function le(t){if(t.exists()){var e=new BufferedReader(new FileReader(t)),n="",r="";do{n+=r,n+="\n",r=e.readLine()}while(r);return e.close(),n}}Object.defineProperty(ue,"__esModule",{value:!0}),ue.readFile=le;var he={};Object.defineProperty(he,"__esModule",{value:!0}),he.transformIDs=function(t,e){"ignoredBlocks"!==e||t[e].includes("air")||t[e].push("air"),t[e]=t[e].map((function(t){return context.getBlock(t).id}))};context.getSession();var fe=pe(wt),de=pe(Ht);function pe(t){return t&&t.__esModule?t:{default:t}}function me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ge(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}importPackage(Packages.com.sk89q.worldedit),importPackage(Packages.com.sk89q.worldedit.math),importPackage(Packages.com.sk89q.worldedit.blocks),context.checkArgs(1,3,It.draw);var be=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?me(Object(n),!0).forEach((function(e){ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({block:argv[2]||"gold_block",offset:0,height:1,onGround:!0,ignoreBuildings:!0,ignoreVegetation:!0,ignoredBlocks:se.ignoredBlocks,allowedBlocks:se.allowedBlocks},JSON.parse(argv[3]||"{}"));(0,he.transformIDs)(be,"ignoredBlocks"),(0,he.transformIDs)(be,"allowedBlocks"),player.print("\xa77Please wait..."),function(t){var e=context.getSafeOpenFile("drawings",argv[1],"geojson",["json","geojson","kml"]),n=(0,ue.readFile)(e);if(e.exists()){var r=n;if(-1===e.toString().lastIndexOf(".kml"))r=JSON.parse(n),player.print("\xa77Imported GeoJSON...");else{var o=(new gt.DOMParser).parseFromString(n,"text/xml");r=fe.default.kml(o),player.print("\xa77Imported KML...")}!function(t,e){var n=(0,de.default)(t),r=(0,ee.findGround)(e),o=(0,ee.ignoreBuildings)(e),a=(0,ee.setOffset)(e),i=(0,ee.setWall)(e);(0,ee.draw)(n,(function(t){t=r(t),o(t)&&(t=a(t),i(t)),player.print(t)})),(0,ee.printBlocks)()}(r,t)}else player.printError("No such file or directory: ".concat(e))}(be)}();